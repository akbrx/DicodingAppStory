"use strict";(self.webpackChunkdicoding_story_app=self.webpackChunkdicoding_story_app||[]).push([[524],{476:(t,e,r)=>{function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];t&&e&&(t.style.display=r?"inline-flex":"none",e.disabled=r,r?(e.setAttribute("aria-busy","true"),e.dataset.originalText||(e.dataset.originalText=e.innerHTML)):e.removeAttribute("aria-busy"),n.forEach((function(t){t&&void 0!==t.disabled&&(t.disabled=r)})))}function a(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t)if(t.textContent=e,t.style.display="block",t.setAttribute("tabindex","-1"),t.getAttribute("role")||t.setAttribute("role","alert"),r&&"function"==typeof r.focus&&null!==r.offsetParent){if(r.focus(),("INPUT"===r.tagName||"TEXTAREA"===r.tagName||"SELECT"===r.tagName)&&(r.setAttribute("aria-invalid","true"),t.id)){var o=r.getAttribute("aria-describedby"),i=o?"".concat(o," ").concat(t.id):t.id,a=n(new Set(i.split(" "))).join(" ");r.setAttribute("aria-describedby",a)}}else t.focus();else u(e,"error")}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t&&(t.textContent="",t.style.display="none",t.removeAttribute("role"),t.removeAttribute("tabindex"),e&&(e.removeAttribute("aria-invalid"),t.id))){var r=e.getAttribute("aria-describedby");if(r){var n=r.split(" ").filter((function(e){return e!==t.id})).join(" ");n?e.setAttribute("aria-describedby",n):e.removeAttribute("aria-describedby")}}}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,n=document.getElementById("notification-container");if(n){var o=document.createElement("div");o.className="toast-notification toast--".concat(e),o.setAttribute("role","status"),o.setAttribute("aria-live","polite");var i="fas fa-info-circle";"success"===e?i="fas fa-check-circle":"error"===e&&(i="fas fa-exclamation-circle"),o.innerHTML='\n          <i class="'.concat(i,'" aria-hidden="true"></i>\n          <span>').concat(t,'</span>\n          <button class="close-button" aria-label="Tutup notifikasi">&times;</button>\n      '),n.appendChild(o);var a=function(){o.classList.remove("show"),o.addEventListener("transitionend",(function(){try{n.removeChild(o)}catch(t){}}),{once:!0})};requestAnimationFrame((function(){setTimeout((function(){o.classList.add("show")}),10)}));var c=setTimeout(a,r);o.querySelector(".close-button").addEventListener("click",(function(){clearTimeout(c),a()}))}else alert("".concat(e.toUpperCase(),": ").concat(t))}function s(t){u(t,"success",arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3)}function l(t){u(t,"error",arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3)}function f(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Memuat data...";if(t){var n="content-loading-indicator",o=t.querySelector(".".concat(n));if(e)t.setAttribute("aria-busy","true"),t.setAttribute("aria-label",r),o||((o=document.createElement("div")).className=n,o.setAttribute("role","status"),o.setAttribute("aria-live","polite"),o.innerHTML='\n                 <div class="spinner" aria-hidden="true"></div>\n                 <p>'.concat(r,"</p>\n             "),t.innerHTML="",t.appendChild(o)),o.style.display="flex";else if(t.removeAttribute("aria-busy"),t.removeAttribute("aria-label"),o)try{t.removeChild(o)}catch(t){}}}r.d(e,{$f:()=>f,Ds:()=>u,Lu:()=>b,Y7:()=>c,f1:()=>l,kK:()=>i,uT:()=>s,xQ:()=>g,yf:()=>a});var h=null,p=null,d=null,y=null,v=null;function m(){(h=document.getElementById("image-modal"))&&(p=h.querySelector(".image-modal__image"),d=h.querySelector(".image-modal__caption"),y=h.querySelector(".image-modal__close"))}function g(){m(),h&&y&&(y.addEventListener("click",w),h.addEventListener("click",(function(t){t.target===h&&w()})),h.addEventListener("keydown",(function(t){"Escape"===t.key&&w()})))}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(h&&p&&d||(m(),h&&p&&d))&&(v=document.activeElement,p.src=t||"",p.alt=e||"Gambar cerita",d.textContent=e||"",h.setAttribute("aria-hidden","false"),y?y.focus():h.focus())}function w(){h&&(h.setAttribute("aria-hidden","true"),v&&"function"==typeof v.focus&&v.focus(),v=null)}},494:(t,e,r)=>{const n={BASE_URL:"https://story-api.dicoding.dev/v1",MAP_API_KEY:"ycYnjQnQjaybWkdGWhCZ",MAP_TILE_LAYER_URL:"https://api.maptiler.com/maps/streets-v2/{z}/{x}/{y}.png?key={apiKey}",MAP_TILE_LAYER_URL_SATELITE:"https://api.maptiler.com/maps/satellite/{z}/{x}/{y}.jpg?key={apiKey}",VAPID_PUBLIC_KEY:"BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk"};var o="auth:login",i="auth:logout",a={events:{},on:function(t,e){"function"==typeof e&&(this.events[t]||(this.events[t]=[]),this.events[t].push(e))},dispatch:function(t,e){var r=this.events[t];r&&r.length>0&&r.forEach((function(t){try{t(e)}catch(t){}}))},off:function(t,e){var r=this.events[t];r&&(this.events[t]=r.filter((function(t){return t!==e})))}};Object.freeze(a);const c=a;function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}var f="dicoding_story_auth_token",h="dicoding_story_user_info";function p(t){if(t)try{localStorage.setItem(f,t)}catch(t){}}function d(){try{return localStorage.getItem(f)}catch(t){return null}}function y(t){if(t&&"object"===l(t)&&t.userId&&t.name)try{localStorage.setItem(h,JSON.stringify(t)),c.dispatch(o,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t))}catch(t){}}function v(){try{var t=localStorage.getItem(h);if(!t)return null;try{return JSON.parse(t)}catch(t){return m(),null}}catch(t){return null}}function m(){try{localStorage.removeItem(h)}catch(t){}}function g(){return!!d()}function b(){var t=v();!function(){try{localStorage.removeItem(f)}catch(t){}}(),m(),c.dispatch(i,{lastUser:t}),location.hash="#/login"}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(){k=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new C(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var E={};s(E,a,(function(){return this}));var L=Object.getPrototypeOf,x=L&&L(L(I([])));x&&x!==r&&n.call(x,a)&&(E=x);var _=b.prototype=m.prototype=Object.create(E);function S(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==w(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function I(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(w(e)+" is not iterable")}return g.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},S(O.prototype),s(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function O(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){S(i,n,o,a,c,"next",t)}function c(t){S(i,n,o,a,c,"throw",t)}a(void 0)}))}}var j=n.BASE_URL,P={REGISTER:"".concat(j,"/register"),LOGIN:"".concat(j,"/login"),GET_STORIES:"".concat(j,"/stories"),ADD_STORY:"".concat(j,"/stories"),GET_STORY_DETAIL:function(t){return"".concat(j,"/stories/").concat(t)},SUBSCRIBE_NOTIFICATION:"".concat(j,"/notifications/subscribe")};function T(t){return N.apply(this,arguments)}function N(){return N=O(k().mark((function t(e){var r,n,o,i,a,c,u,s,l,f,h,p,d=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},n=new AbortController,o=setTimeout((function(){n.abort()}),15e3),t.prev=4,t.next=7,fetch(e,x(x({},r),{},{signal:n.signal}));case 7:if(i=t.sent,clearTimeout(o),204!==i.status){t.next=12;break}return t.abrupt("return",{error:!1,message:"Operasi berhasil."});case 12:return t.prev=12,t.next=15,i.json();case 15:c=t.sent,t.next=28;break;case 18:if(t.prev=18,t.t0=t.catch(12),i.ok){t.next=26;break}return t.next=24,i.text().catch((function(){return"Server error ".concat(i.status)}));case 24:throw u=t.sent,new Error("Server error (".concat(i.status,"): ").concat(u.substring(0,100)));case 26:c={error:!1,message:"Respons sukses namun body kosong atau tidak valid.",data:null};case 28:if(i.ok){t.next=35;break}throw l=(null===(s=c)||void 0===s?void 0:s.message)||i.statusText,f=i.status,h=l||"Terjadi kesalahan (".concat(f,")"),f>=500?h="Terjadi masalah pada server (".concat(f,"). Mohon coba beberapa saat lagi."):401===f?h="Akses ditolak (401). Sesi Anda mungkin berakhir, silakan login kembali.":400===f?h="Input tidak valid: ".concat(l):404===f?h="Sumber tidak ditemukan (".concat(f,")."):413===f&&(h="Ukuran file terlalu besar (".concat(f,"). Pastikan gambar tidak melebihi 1MB.")),new Error(h);case 35:if(!0!==(null===(a=c)||void 0===a?void 0:a.error)){t.next=38;break}throw new Error(c.message||"Terjadi kesalahan pada server.");case 38:return t.abrupt("return",c);case 42:throw t.prev=42,t.t1=t.catch(4),clearTimeout(o),p="Terjadi kesalahan: ".concat(t.t1.message),"AbortError"===t.t1.name?p="Permintaan ke server terlalu lama. Periksa koneksi Anda dan coba lagi.":t.t1 instanceof TypeError&&t.t1.message.includes("fetch")?p="Gagal terhubung ke server. Periksa koneksi internet Anda.":(t.t1.message.includes("Akses ditolak")||t.t1.message.includes("Input tidak valid")||t.t1.message.includes("Server error")||t.t1.message.includes("Ukuran file"))&&(p=t.t1.message),new Error(p);case 49:case"end":return t.stop()}}),t,null,[[4,42],[12,18]])}))),N.apply(this,arguments)}function C(t){return I.apply(this,arguments)}function I(){return I=O(k().mark((function t(e){var r,n,o,i,a=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},n=d(),o=e.includes("/login")||e.includes("/register"),n||o){t.next=6;break}throw new Error("Autentikasi diperlukan. Silakan login terlebih dahulu.");case 6:return i={Authorization:n?"Bearer ".concat(n):""},r.body instanceof FormData||(i["Content-Type"]="application/json"),t.abrupt("return",T(e,x(x({},r),{},{headers:x(x({},i),r.headers)})));case 9:case"end":return t.stop()}}),t)}))),I.apply(this,arguments)}function M(t){return A.apply(this,arguments)}function A(){return(A=O(k().mark((function t(e){var r,n,o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.name,n=e.email,o=e.password,t.abrupt("return",T(P.REGISTER,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:n,password:o})}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(t){return B.apply(this,arguments)}function B(){return(B=O(k().mark((function t(e){var r,n,o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.email,n=e.password,t.next=3,T(P.LOGIN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:n})});case 3:if((o=t.sent)&&o.loginResult){t.next=7;break}throw new Error("Format respons login tidak valid dari server.");case 7:return t.abrupt("return",o.loginResult);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(){return D.apply(this,arguments)}function D(){return D=O(k().mark((function t(){var e,r,n,o,i,a,c,u=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(e=u.length>0&&void 0!==u[0]?u[0]:{}).page,n=void 0===r?1:r,o=e.size,i=void 0===o?10:o,a=e.location,c=new URLSearchParams({page:n,size:i,location:void 0===a?0:a}).toString(),t.abrupt("return",C("".concat(P.GET_STORIES,"?").concat(c)));case 3:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function W(t){return U.apply(this,arguments)}function U(){return(U=O(k().mark((function t(e){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}throw new Error("ID cerita diperlukan untuk mengambil detail.");case 3:return t.abrupt("return",C(P.GET_STORY_DETAIL(e)));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){return Y.apply(this,arguments)}function Y(){return(Y=O(k().mark((function t(e){var r,n,o,i,a,c;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.description,n=e.photo,o=e.lat,i=e.lon,(a=new FormData).append("description",r),a.append("photo",n),(c=function(t){return"number"==typeof t&&!isNaN(t)})(o)&&c(i)&&(a.append("lat",o),a.append("lon",i)),t.abrupt("return",C(P.ADD_STORY,{method:"POST",body:a}));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function q(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return z(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function K(){K=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==H(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(H(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function V(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function $(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){V(i,n,o,a,c,"next",t)}function c(t){V(i,n,o,a,c,"throw",t)}a(void 0)}))}}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q(n.key),n)}}function Q(t){var e=function(t,e){if("object"!=H(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==H(e)?e:e+""}function Z(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function X(t,e,r){return t.set(et(t,e),r),r}function tt(t,e){return t.get(et(t,e))}function et(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var rt=new WeakMap,nt=new WeakMap,ot=new WeakMap,it=new WeakMap,at=new WeakMap,ct=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,rt,[]),Z(this,nt,1),Z(this,ot,9),Z(this,it,!1),Z(this,at,!1)},e=[{key:"fetchInitialStories",value:(i=$(K().mark((function t(){var e;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=4,F({page:1,size:tt(ot,this),location:0});case 4:return e=t.sent,X(rt,this,e.listStory||[]),X(at,this,tt(rt,this).length<tt(ot,this)),t.abrupt("return",{stories:tt(rt,this),allLoaded:tt(at,this)});case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(){return i.apply(this,arguments)})},{key:"fetchMoreStories",value:(o=$(K().mark((function t(){var e,r;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!tt(it,this)&&!tt(at,this)){t.next=2;break}return t.abrupt("return",{stories:[],allLoaded:tt(at,this)});case 2:return t.prev=2,X(it,this,!0),X(nt,this,tt(nt,this)+1),t.next=8,F({page:tt(nt,this),size:tt(ot,this),location:0});case 8:return e=t.sent,(r=e.listStory||[]).length>0&&X(rt,this,[].concat(q(tt(rt,this)),q(r))),X(at,this,r.length<tt(ot,this)),t.abrupt("return",{stories:r,allLoaded:tt(at,this)});case 16:throw t.prev=16,t.t0=t.catch(2),X(nt,this,tt(nt,this)-1),t.t0;case 21:return t.prev=21,X(it,this,!1),t.finish(21);case 24:case"end":return t.stop()}}),t,this,[[2,16,21,24]])}))),function(){return o.apply(this,arguments)})},{key:"getStories",value:function(){return tt(rt,this)}},{key:"resetState",value:function(){X(rt,this,[]),X(nt,this,1),X(it,this,!1),X(at,this,!1)}},{key:"subscribeToNotifications",value:function(){var t=$(K().mark((function t(e){var r,o,i;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=localStorage.getItem("token")){t.next=3;break}throw new Error("Unauthorized: No token found");case 3:return t.next=5,fetch("".concat(n.BASE_URL,"/notifications/subscribe"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({endpoint:e.endpoint,keys:{p256dh:e.toJSON().keys.p256dh,auth:e.toJSON().keys.auth}})});case 5:return o=t.sent,t.next=8,o.json();case 8:if(!(i=t.sent).error){t.next=11;break}throw new Error(i.message);case 11:return t.abrupt("return",i.data);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"unsubscribeFromNotifications",value:function(){var t=$(K().mark((function t(e){var r,o,i;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=localStorage.getItem("token")){t.next=3;break}throw new Error("Unauthorized: No token found");case 3:return t.next=5,fetch("".concat(n.BASE_URL,"/notifications/subscribe"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({endpoint:e})});case 5:return o=t.sent,t.next=8,o.json();case 8:if(!(i=t.sent).error){t.next=11;break}throw new Error(i.message);case 11:return t.abrupt("return",i);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}],e&&J(t.prototype,e),r&&J(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,o,i}(),ut=r(476);"undefined"==typeof L||(L.Icon.Default.imagePath="https://unpkg.com/leaflet@1.9.4/dist/images/");var st=null,lt=[],ft=null,ht=null;function pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-6.2,106.816666],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(!L)return null;var o=document.getElementById(t);if(!o)return null;if(o._leaflet_id){if(st&&"function"==typeof st.remove)try{ht&&st.hasLayer(ht)&&ht.remove(),st.remove()}catch(t){}else o.innerHTML="";st=null,ht=null,delete o._leaflet_id}o.innerHTML="";try{st=L.map(t,{center:e,zoom:r});var i=L.tileLayer(n.MAP_TILE_LAYER_URL,{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> contributors &amp; <a href="https://www.maptiler.com/">MapTiler</a>',apiKey:n.MAP_API_KEY}),a=L.tileLayer(n.MAP_TILE_LAYER_URL_SATELITE,{maxZoom:19,attribution:'&copy; <a href="https://www.maptiler.com/">MapTiler</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> contributors',apiKey:n.MAP_API_KEY});i.addTo(st);var c={Streets:i,Satellite:a};return ht=L.control.layers(c).addTo(st),lt=[],ft=null,st}catch(t){return o.innerHTML='<p class="error-message" style="padding: 10px;">Gagal memuat peta.</p>',st=null,null}}function dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!L||!st||!t)return null;var n=Array.isArray(t)?t[0]:t.lat,o=Array.isArray(t)?t[1]:t.lon||t.lng;if("number"!=typeof n||"number"!=typeof o||isNaN(n)||isNaN(o))return null;try{var i=L.marker([n,o],r).addTo(st);return e&&i.bindPopup(e,{maxWidth:250}),lt.push(i),i}catch(t){return t.message.includes("appendChild"),null}}function yt(){if(st){if(lt.forEach((function(t){if(st.hasLayer(t))try{st.removeLayer(t)}catch(t){}})),lt=[],ft&&st.hasLayer(ft))try{st.removeLayer(ft)}catch(t){}ft=null}}function vt(){return st}function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function gt(){gt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==mt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(mt(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function bt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function wt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){bt(i,n,o,a,c,"next",t)}function c(t){bt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Et(n.key),n)}}function Et(t){var e=function(t,e){if("object"!=mt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==mt(e)?e:e+""}function Lt(t,e,r){xt(t,e),e.set(t,r)}function xt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _t(t,e,r){return t.set(Ot(t,e),r),r}function St(t,e){return t.get(Ot(t,e))}function Ot(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var jt=new WeakMap,Pt=new WeakMap,Tt=new WeakMap,Nt=new WeakMap,Ct=new WeakMap,It=new WeakMap,Mt=new WeakMap,At=new WeakMap,Gt=new WeakMap,Bt=new WeakMap,Ft=new WeakSet,Dt=new WeakMap,Wt=function(){return t=function t(){var e,r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),xt(e=this,r=Ft),r.add(e),Lt(this,jt,null),Lt(this,Pt,null),Lt(this,Tt,null),Lt(this,Nt,null),Lt(this,Ct,null),Lt(this,It,null),Lt(this,Mt,null),Lt(this,At,null),Lt(this,Gt,null),Lt(this,Bt,null),Lt(this,Dt,(function(){St(Gt,n)&&St(Gt,n).call(n)}))},e=[{key:"getTemplate",value:function(){return'<section class="container home-page" aria-labelledby="page-heading">\n      <h1 id="page-heading" tabindex="0">Cerita Terbaru</h1>\n      <a href="stories" class="skip-link" data-skip-link>Skip to Stories</a>\n      \n      \x3c!-- Notification Toggle Section --\x3e\n      <div id="notification-toggle" class="notification-toggle" style="margin-bottom: 20px; padding: 15px; background-color: white; border-radius: 5px;">\n        <div style="display: flex; justify-content: space-between; align-items: center;">\n          <div>\n            <h3 style="margin: 0 0 5px 0; color: black;">Notifikasi Cerita</h3>\n            <p style="margin: 0; color: #666;">Dapatkan notifikasi saat cerita baru dipublikasikan</p>\n          </div>\n          <button id="notification-toggle-btn" class="button button--primary">\n            Aktifkan Notifikasi\n          </button>\n        </div>\n      </div>\n      \n      <div id="stories" class="stories-container">\n      <aside class="map-container" id="map-container-element" aria-labelledby="map-heading">\n          \n          <h2 id="map-heading">Peta Lokasi Cerita</h2>\n          <div id="story-map" role="application" aria-label="Peta lokasi cerita">\n           <div class="content-loading-indicator" role="status">\n               <p>Memuat peta...</p>\n           </div>\n          </div>\n          <p id="map-feedback" style="margin-top: 10px;"><small>Peta akan dimuat...</small></p>\n      </aside>\n      <br></br>\n          <div id="stories-list" class="stories-list" aria-live="polite" aria-busy="true">\n          </div>\n          <div id="load-more-container" class="load-more-container" style="display: none;">\n              <button id="load-more-button" class="button button--primary">Muat Lebih Banyak</button>\n          </div>\n      </div>\n    </section>\n  '}},{key:"init",value:function(){if(Ot(Ft,this,Ut).call(this),!(St(Pt,this)&&St(Tt,this)&&St(Nt,this)&&St(Mt,this)&&St(It,this)&&St(Bt,this)))return!1;Ot(Ft,this,Rt).call(this),Ot(Ft,this,Yt).call(this),St(Nt,this).innerHTML="<small>Memuat data peta...</small>";var t=document.getElementById("story-map");return t&&this.setContentBusy(t,!0,"Memuat peta..."),!0}},{key:"setupMapObserver",value:function(t){var e=this;St(Ct,this)&&(St(Ct,this).disconnect(),_t(Ct,this,null)),this.removeMapInstance(),_t(Ct,this,new IntersectionObserver((function(r){r[0].isIntersecting&&(St(Ct,e)&&St(Ct,e).disconnect(),t())}),{rootMargin:"200px",threshold:.01})),St(Tt,this)&&St(Ct,this).observe(St(Tt,this))}},{key:"removeSkeletonLoaders",value:function(){if(St(At,this)&&St(Pt,this)){try{St(Pt,this).removeChild(St(At,this))}catch(t){}_t(At,this,null),St(Pt,this).removeAttribute("aria-busy")}}},{key:"renderStoryItems",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(St(Pt,this)){e||(St(Pt,this).innerHTML="");var r=document.createDocumentFragment();t.forEach((function(t){try{var e=document.createElement("story-item");e.story=t,r.appendChild(e)}catch(t){var n=document.createElement("div");n.textContent="Gagal memuat cerita.",n.className="error-message",n.style.border="1px dashed red",n.style.padding="10px",r.appendChild(n)}})),St(Pt,this).appendChild(r),St(Pt,this).removeAttribute("aria-busy")}}},{key:"initMap",value:function(){try{var t="story-map",e=document.getElementById(t);return e&&this.setContentBusy(e,!1),_t(jt,this,pt(t)),St(jt,this)?(St(Nt,this)&&(St(Nt,this).innerHTML="<small>Peta siap.</small>"),!0):(St(Nt,this)&&(0,ut.yf)(St(Nt,this),"Gagal memuat peta."),!1)}catch(t){return St(Nt,this)&&(0,ut.yf)(St(Nt,this),"Gagal memuat peta."),!1}}},{key:"showNoStoriesMessage",value:function(){St(Pt,this)&&(St(Pt,this).innerHTML='<p style="text-align: center; padding: 20px; color: #555;">Belum ada cerita untuk ditampilkan.</p>'),St(Mt,this)&&(St(Mt,this).style.display="none")}},{key:"showLoadMoreError",value:function(t){(0,ut.f1)("Gagal memuat lebih banyak cerita: ".concat(t.message))}},{key:"showLoadMoreButton",value:function(t){St(Mt,this)&&(St(Mt,this).style.display=t?"block":"none")}},{key:"setLoadMoreButtonLoading",value:function(t){St(It,this)&&(St(It,this).disabled=t,St(It,this).innerHTML=t?'<span class="spinner spinner--small"></span> Memuat...':"Muat Lebih Banyak")}},{key:"showStoryLoadError",value:function(t){if(this.removeSkeletonLoaders(),St(Pt,this)){St(Pt,this).innerHTML="";var e=document.createElement("div");e.style.padding="20px",e.id="story-list-error",(0,ut.yf)(e,"Gagal memuat cerita: ".concat(t.message,".")),St(Pt,this).appendChild(e),e.focus()}St(Nt,this)&&(0,ut.yf)(St(Nt,this),"Gagal memuat data cerita."),St(Ct,this)&&St(Tt,this)&&St(Ct,this).unobserve(St(Tt,this)),St(Mt,this)&&(St(Mt,this).style.display="none")}},{key:"populateMapMarkers",value:function(t){if(St(jt,this)&&t&&St(Nt,this)){yt();var e=0;t.forEach((function(t){var r=function(t){return"number"==typeof t&&!isNaN(t)};if(r(t.lat)&&r(t.lon))try{var n='\n            <div style="max-width:180px; font-family: var(--font-family-sans);">\n              <img src="'.concat(t.photoUrl||"images/placeholder.png",'" alt="Mini preview" width="150" style="width:100%; height:auto; margin-bottom:8px; border-radius:3px; object-fit: cover;" onerror="this.onerror=null;this.src=\'images/placeholder.png\';">\n              <strong style="display:block; margin-bottom:3px; font-size: 0.95rem; color: var(--primary-color);">').concat(t.name||"Anonim",'</strong>\n              <small style="color:var(--medium-text); display: block; font-size: 0.8rem; max-height: 3.2em; overflow: hidden;" title="').concat(t.description||"",'">').concat((t.description||"").substring(0,50),"...</small>\n            </div>");dt([t.lat,t.lon],n),e++}catch(t){}})),(0,ut.Y7)(St(Nt,this)),e>0?St(Nt,this).innerHTML="<small>".concat(e," cerita dengan lokasi ditampilkan.</small>"):t.length>0?St(Nt,this).innerHTML="<small><em>Tidak ada cerita dengan lokasi valid saat ini.</em></small>":St(Nt,this).innerHTML="<small>Peta siap.</small>"}}},{key:"removeMapInstance",value:function(){var t;if(null!==(t=St(jt,this))&&void 0!==t&&t.remove)try{yt(),St(jt,this).remove()}catch(t){}_t(jt,this,null)}},{key:"setContentBusy",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(t){var n="content-loading-indicator",o=t.querySelector(".".concat(n));if(e)t.setAttribute("aria-busy","true"),o||((o=document.createElement("div")).className=n,o.setAttribute("role","status"),o.innerHTML="<p>".concat(r,"</p>"),t.innerHTML="",t.appendChild(o)),o.style.display="flex";else if(t.removeAttribute("aria-busy"),o)try{t.removeChild(o)}catch(t){}}}},{key:"attachLoadMoreEvent",value:function(t){_t(Gt,this,t),St(It,this)&&(St(It,this).removeEventListener("click",St(Dt,this)),St(It,this).addEventListener("click",St(Dt,this)))}},{key:"cleanup",value:function(){St(Ct,this)&&(St(Ct,this).disconnect(),_t(Ct,this,null)),this.removeMapInstance(),St(It,this)&&St(It,this).removeEventListener("click",St(Dt,this)),St(Bt,this)&&St(Bt,this).removeEventListener("click",Ot(Ft,this,zt)),_t(Pt,this,null),_t(Tt,this,null),_t(Nt,this,null),_t(It,this,null),_t(Mt,this,null),_t(At,this,null),_t(Gt,this,null),_t(Bt,this,null)}}],e&&kt(t.prototype,e),r&&kt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ut(){_t(Pt,this,document.getElementById("stories-list")),_t(Tt,this,document.getElementById("map-container-element")),_t(Nt,this,document.getElementById("map-feedback")),_t(Mt,this,document.getElementById("load-more-container")),_t(It,this,document.getElementById("load-more-button")),_t(Bt,this,document.getElementById("notification-toggle-btn"))}function Rt(){if(St(Pt,this)){St(Pt,this).innerHTML="",St(Pt,this).removeAttribute("aria-busy"),_t(At,this,document.createElement("div")),St(At,this).className="skeleton-container",St(Pt,this).appendChild(St(At,this));for(var t=0;t<9;t++){var e=document.createElement("div");e.className="skeleton-item",e.innerHTML='\n        <div class="skeleton skeleton-image"></div>\n        <div class="skeleton-content">\n          <div class="skeleton skeleton-line skeleton-line--title"></div>\n          <div class="skeleton skeleton-line skeleton-line--small"></div>\n          <div class="skeleton skeleton-line skeleton-line--text"></div>\n          <div class="skeleton skeleton-line skeleton-line--text"></div>\n        </div>\n      ',St(At,this).appendChild(e)}St(Pt,this).setAttribute("aria-busy","true")}}function Yt(){return Ht.apply(this,arguments)}function Ht(){return(Ht=wt(gt().mark((function t(){var e,r,n=this;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(St(Bt,this)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,navigator.serviceWorker.ready;case 5:return e=t.sent,t.next=8,e.pushManager.getSubscription();case 8:r=t.sent,Ot(Ft,this,qt).call(this,!!r),St(Bt,this).addEventListener("click",(function(){return Ot(Ft,n,zt).call(n)})),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),St(Bt,this).style.display="none";case 17:case"end":return t.stop()}}),t,this,[[2,13]])})))).apply(this,arguments)}function qt(t){St(Bt,this)&&(St(Bt,this).textContent=t?"Berhenti Berlangganan":"Aktifkan Notifikasi",St(Bt,this).classList.toggle("subscribed",t))}function zt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=wt(gt().mark((function t(){var e,r,n,o,i;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(St(Bt,this)){t.next=2;break}return t.abrupt("return");case 2:if(e=localStorage.getItem("dicoding_story_auth_token")){t.next=6;break}return(0,ut.f1)("Silakan login terlebih dahulu"),t.abrupt("return");case 6:return t.prev=6,St(Bt,this).disabled=!0,St(Bt,this).textContent="Memproses...",t.next=11,navigator.serviceWorker.ready;case 11:return r=t.sent,t.next=14,r.pushManager.getSubscription();case 14:if(!(n=t.sent)){t.next=22;break}return t.next=18,Ot(Ft,this,Jt).call(this,n,e);case 18:Ot(Ft,this,qt).call(this,!1),(0,ut.uT)("Berhasil berhenti berlangganan notifikasi!"),t.next=31;break;case 22:return t.next=24,Ot(Ft,this,Vt).call(this,r,e);case 24:if(!(o=t.sent)||o.error){t.next=30;break}Ot(Ft,this,qt).call(this,!0),(0,ut.uT)("Berhasil berlangganan notifikasi!"),t.next=31;break;case 30:throw new Error("Gagal berlangganan notifikasi");case 31:t.next=41;break;case 33:return t.prev=33,t.t0=t.catch(6),(0,ut.f1)(t.t0.message),t.next=39,navigator.serviceWorker.ready.then((function(t){return t.pushManager.getSubscription()}));case 39:i=t.sent,Ot(Ft,this,qt).call(this,!!i);case 41:return t.prev=41,St(Bt,this)&&(St(Bt,this).disabled=!1,St(Bt,this).textContent=St(Bt,this).classList.contains("subscribed")?"Berhenti Berlangganan":"Aktifkan Notifikasi"),t.finish(41);case 44:case"end":return t.stop()}}),t,this,[[6,33,41,44]])})))).apply(this,arguments)}function Vt(t,e){return $t.apply(this,arguments)}function $t(){return($t=wt(gt().mark((function t(e,r){var o,i;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Notification.requestPermission();case 3:if("granted"===t.sent){t.next=6;break}throw new Error("Izin notifikasi ditolak");case 6:return t.next=8,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ot(Ft,this,Zt).call(this,n.VAPID_PUBLIC_KEY)});case 8:return o=t.sent,t.next=11,fetch("".concat(n.BASE_URL,"/notifications/subscribe"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({endpoint:o.endpoint,keys:{p256dh:o.toJSON().keys.p256dh,auth:o.toJSON().keys.auth}})});case 11:if((i=t.sent).ok){t.next=14;break}throw new Error("Gagal mendaftar ke layanan notifikasi");case 14:return t.next=16,i.json();case 16:return t.abrupt("return",t.sent);case 19:throw t.prev=19,t.t0=t.catch(0),t.t0;case 23:case"end":return t.stop()}}),t,this,[[0,19]])})))).apply(this,arguments)}function Jt(t,e){return Qt.apply(this,arguments)}function Qt(){return(Qt=wt(gt().mark((function t(e,r){return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(n.BASE_URL,"/notifications/subscribe"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({endpoint:e.endpoint})});case 2:if(t.sent.ok){t.next=5;break}throw new Error("Gagal berhenti berlangganan dari layanan notifikasi");case 5:return t.next=7,e.unsubscribe();case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zt(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(e),n=new Uint8Array(r.length),o=0;o<r.length;++o)n[o]=r.charCodeAt(o);return n}function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function te(){te=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Xt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Xt(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function ee(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function re(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ee(i,n,o,a,c,"next",t)}function c(t){ee(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oe(n.key),n)}}function oe(t){var e=function(t,e){if("object"!=Xt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xt(e)?e:e+""}function ie(t,e,r){ae(t,e),e.set(t,r)}function ae(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ce(t,e){return t.get(se(t,e))}function ue(t,e,r){return t.set(se(t,e),r),r}function se(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var le=new WeakMap,fe=new WeakMap,he=new WeakSet,pe=function(){return t=function t(e){var r,n,o=e.model,i=e.view;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ae(r=this,n=he),n.add(r),ie(this,le,null),ie(this,fe,null),ue(le,this,o),ue(fe,this,i)},e=[{key:"init",value:(i=re(te().mark((function t(){var e=this;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ce(fe,this).init()){t.next=3;break}return t.abrupt("return");case 3:return ce(fe,this).setupMapObserver((function(){return se(he,e,be).call(e)})),t.next=6,se(he,this,de).call(this);case 6:se(he,this,ke).call(this);case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"cleanup",value:(o=re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ce(fe,this)&&ce(fe,this).cleanup(),ce(le,this)&&ce(le,this).resetState(),window.removeEventListener("beforeunload",this.cleanup),window.removeEventListener("hashchange",this.cleanup);case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"handleNotificationToggle",value:function(){var t=re(te().mark((function t(){var e,r,o,i;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.serviceWorker.ready;case 3:return e=t.sent,t.next=6,e.pushManager.getSubscription();case 6:if(!(r=t.sent)){t.next=16;break}return t.next=10,ce(le,this).unsubscribeFromNotifications(r.endpoint);case 10:return t.next=12,r.unsubscribe();case 12:return t.abrupt("return",!1);case 16:return o=n.VAPID_PUBLIC_KEY,t.next=20,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:se(he,this,Ee).call(this,o)});case 20:return i=t.sent,t.next=23,ce(le,this).subscribeToNotifications(i);case 23:return t.sent,t.abrupt("return",!0);case 26:t.next=32;break;case 28:throw t.prev=28,t.t0=t.catch(0),t.t0;case 32:case"end":return t.stop()}}),t,this,[[0,28]])})));return function(){return t.apply(this,arguments)}}()}],e&&ne(t.prototype,e),r&&ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,o,i}();function de(){return ye.apply(this,arguments)}function ye(){return(ye=re(te().mark((function t(){var e,r,n;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce(le,this).fetchInitialStories();case 3:e=t.sent,r=e.stories,n=e.allLoaded,ce(fe,this).removeSkeletonLoaders(),0===r.length?ce(fe,this).showNoStoriesMessage():(ce(fe,this).renderStoryItems(r),ce(fe,this).showLoadMoreButton(!n),se(he,this,ge).call(this)&&se(he,this,we).call(this)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),ce(fe,this).showStoryLoadError(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})))).apply(this,arguments)}function ve(){return me.apply(this,arguments)}function me(){return(me=re(te().mark((function t(){var e,r,n;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ce(fe,this).setLoadMoreButtonLoading(!0),t.prev=1,t.next=4,ce(le,this).fetchMoreStories();case 4:e=t.sent,r=e.stories,n=e.allLoaded,r.length>0&&(ce(fe,this).renderStoryItems(r,!0),se(he,this,ge).call(this)&&se(he,this,we).call(this)),ce(fe,this).showLoadMoreButton(!n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),ce(fe,this).showLoadMoreError(t.t0);case 14:return t.prev=14,ce(fe,this).setLoadMoreButtonLoading(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})))).apply(this,arguments)}function ge(){return!0}function be(){ce(fe,this).initMap()&&(ce(le,this).getStories().length>0&&se(he,this,we).call(this))}function we(){var t=ce(le,this).getStories();ce(fe,this).populateMapMarkers(t)}function ke(){var t=this;ce(fe,this).attachLoadMoreEvent((function(){return se(he,t,ve).call(t)})),window.removeEventListener("hashchange",this.cleanup),window.removeEventListener("beforeunload",this.cleanup),window.addEventListener("hashchange",this.cleanup.bind(this),{once:!0}),window.addEventListener("beforeunload",this.cleanup.bind(this))}function Ee(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(e),n=new Uint8Array(r.length),o=0;o<r.length;++o)n[o]=r.charCodeAt(o);return n}function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function xe(){xe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Le(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Le(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function _e(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Se(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_e(i,n,o,a,c,"next",t)}function c(t){_e(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,je(n.key),n)}}function je(t){var e=function(t,e){if("object"!=Le(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Le(e)?e:e+""}function Pe(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Te(t,e){return t.get(Ce(t,e))}function Ne(t,e,r){return t.set(Ce(t,e),r),r}function Ce(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Ie=new WeakMap,Me=new WeakMap,Ae=new WeakMap,Ge=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,Ie,null),Pe(this,Me,null),Pe(this,Ae,null),this.title="Beranda - Dicoding Story App"},e=[{key:"render",value:(i=Se(xe().mark((function t(){return xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n    <section class="container home-page" aria-labelledby="page-heading">\n      <a href="stories" class="skip-link" data-skip-link>Skip to Stories</a>\n      \n      \x3c!-- Notification Toggle Section --\x3e\n      <div id="notification-toggle" class="notification-toggle" style="margin-bottom: 20px; padding: 15px; background-color: white; border-radius: 5px;">\n        <div style="display: flex; justify-content: space-between; align-items: center;">\n          <div>\n            <h3 style="margin: 0 0 5px 0; color: black;">Notifikasi Cerita</h3>\n            <p style="margin: 0; color: #666;">Dapatkan notifikasi saat cerita baru dipublikasikan</p>\n          </div>\n          <button id="notification-toggle-btn" class="button button--primary">\n            Aktifkan Notifikasi\n          </button>\n        </div>\n      </div>\n      \n      <div id="stories" class="stories-container">\n      <aside class="map-container" id="map-container-element" aria-labelledby="map-heading">\n          \n          <h2 id="map-heading">Peta Lokasi Cerita</h2>\n          <div id="story-map" role="application" aria-label="Peta lokasi cerita">\n           <div class="content-loading-indicator" role="status">\n               <p>Memuat peta...</p>\n           </div>\n          </div>\n          <p id="map-feedback" style="margin-top: 10px;"><small>Peta akan dimuat...</small></p>\n      </aside>\n      <br></br>\n        <h1 id="page-heading" tabindex="0">Cerita Terbaru</h1>\n          <div id="stories-list" class="stories-list" aria-live="polite" aria-busy="true">\n          </div>\n          <div id="load-more-container" class="load-more-container" style="display: none;">\n              <button id="load-more-button" class="button button--primary">Muat Lebih Banyak</button>\n          </div>\n      </div>\n    </section>\n  ');case 2:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"afterRender",value:(o=Se(xe().mark((function t(){return xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ne(Ie,this,new ct),Ne(Me,this,new Wt),Ne(Ae,this,new pe({model:Te(Ie,this),view:Te(Me,this)})),t.next=6,Te(Ae,this).init();case 6:case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_cleanup",value:(n=Se(xe().mark((function t(){return xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Te(Ae,this)){t.next=3;break}return t.next=3,Te(Ae,this).cleanup();case 3:Ne(Ie,this,null),Ne(Me,this,null),Ne(Ae,this,null);case 7:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&Oe(t.prototype,e),r&&Oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i}();function Be(t){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(t)}function Fe(){Fe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Be(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Be(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function De(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function We(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){De(i,n,o,a,c,"next",t)}function c(t){De(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Re(n.key),n)}}function Re(t){var e=function(t,e){if("object"!=Be(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Be(e)?e:e+""}function Ye(t,e,r){He(t,e),e.set(t,r)}function He(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qe(t,e,r){return t.set(Ke(t,e),r),r}function ze(t,e){return t.get(Ke(t,e))}function Ke(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Ve=new WeakMap,$e=new WeakMap,Je=new WeakMap,Qe=new WeakMap,Ze=new WeakMap,Xe=new WeakMap,tr=new WeakMap,er=new WeakMap,rr=new WeakSet,nr=new WeakMap,or=function(){return t=function t(){var e,r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),He(e=this,r=rr),r.add(e),Ye(this,Ve,null),Ye(this,$e,null),Ye(this,Je,null),Ye(this,Qe,null),Ye(this,Ze,null),Ye(this,Xe,null),Ye(this,tr,null),Ye(this,er,null),Ye(this,nr,function(){var t=We(Fe().mark((function t(e){var r,o,i,a,c;return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),Ke(rr,n,ar).call(n)){t.next=5;break}return(r=ze(Ve,n).querySelector('.error-message[style*="block"]'))&&r.focus(),t.abrupt("return");case 5:return o=[ze($e,n),ze(Je,n)],(0,ut.kK)(ze(Ze,n),ze(Qe,n),!0,o),i=ze($e,n).value,a=ze(Je,n).value,t.prev=9,t.next=13,G({email:i,password:a});case 13:p((c=t.sent).token),y({userId:c.userId,name:c.name}),(0,ut.uT)("Login berhasil! Mengarahkan ke Beranda..."),location.hash="#/",t.next=26;break;case 20:t.prev=20,t.t0=t.catch(9),(0,ut.yf)(ze(Xe,n),"Login gagal: ".concat(t.t0.message)),t.t0.message.toLowerCase().includes("email")||t.t0.message.toLowerCase().includes("user not found")?((0,ut.yf)(ze(tr,n),t.t0.message,ze($e,n)),ze($e,n)&&ze($e,n).select()):t.t0.message.toLowerCase().includes("password")?((0,ut.yf)(ze(er,n),t.t0.message,ze(Je,n)),ze(Je,n)&&ze(Je,n).select()):ze(Xe,n).focus(),(0,ut.kK)(ze(Ze,n),ze(Qe,n),!1,o);case 26:case"end":return t.stop()}}),t,null,[[9,20]])})));return function(e){return t.apply(this,arguments)}}()),this.title="Login - Dicoding Story App"},e=[{key:"render",value:(o=We(Fe().mark((function t(){return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container auth-page" aria-labelledby="page-heading">\n        <h1 id="page-heading">Login</h1>\n        <form id="login-form" novalidate>\n          <div class="form-group">\n            <label for="email">Email:</label>\n            <input type="email" id="email" name="email" required autocomplete="email" placeholder="Masukkan alamat email" aria-describedby="email-error" aria-required="true">\n            <p id="email-error" class="error-message" style="display: none;" role="alert"></p>\n          </div>\n          <div class="form-group">\n            <label for="password">Password:</label>\n            <input type="password" id="password" name="password" required autocomplete="current-password" placeholder="Masukkan password" aria-describedby="password-error" aria-required="true">\n           <p id="password-error" class="error-message" style="display: none;" role="alert"></p>\n          </div>\n          <div class="form-group form-actions">\n            <button type="submit" class="button button--primary" id="login-button">\n              <i class="fas fa-sign-in-alt" aria-hidden="true"></i> Login\n            </button>\n            <div id="loading-indicator" class="loading-indicator" style="display: none;" aria-label="Loading..." role="status">\n                 <div class="spinner spinner--small" aria-hidden="true"></div> Logging in...\n            </div>\n          </div>\n           <p id="form-error-message" class="error-message" style="display: none;" role="alert" tabindex="-1"></p>\n           <p>Belum punya akun? <a href="#/register">Daftar</a></p>\n        </form>\n      </section>\n    ');case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=We(Fe().mark((function t(){return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ke(rr,this,ir).call(this),ze(Ve,this)){t.next=4;break}return t.abrupt("return");case 4:ze(Ve,this).removeEventListener("submit",ze(nr,this)),ze(Ve,this).addEventListener("submit",ze(nr,this)),ze($e,this)&&ze($e,this).focus();case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&Ue(t.prototype,e),r&&Ue(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function ir(){qe(Ve,this,document.getElementById("login-form")),qe($e,this,document.getElementById("email")),qe(Je,this,document.getElementById("password")),qe(Qe,this,document.getElementById("login-button")),qe(Ze,this,document.getElementById("loading-indicator")),qe(Xe,this,document.getElementById("form-error-message")),qe(tr,this,document.getElementById("email-error")),qe(er,this,document.getElementById("password-error"))}function ar(){(0,ut.Y7)(ze(Xe,this)),(0,ut.Y7)(ze(tr,this),ze($e,this)),(0,ut.Y7)(ze(er,this),ze(Je,this));var t=!0;return ze($e,this).value?ze($e,this).checkValidity()||((0,ut.yf)(ze(tr,this),"Format email tidak valid.",ze($e,this)),t=!1):((0,ut.yf)(ze(tr,this),"Email tidak boleh kosong.",ze($e,this)),t=!1),ze(Je,this).value?ze(Je,this).checkValidity()||((0,ut.yf)(ze(er,this),ze(Je,this).validationMessage||"Password tidak valid.",ze(Je,this)),t=!1):((0,ut.yf)(ze(er,this),"Password tidak boleh kosong.",ze(Je,this)),t=!1),!t&&!ze(tr,this).textContent&&ze(er,this).textContent,t}function cr(t){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cr(t)}function ur(){ur=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==cr(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(cr(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function sr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function lr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){sr(i,n,o,a,c,"next",t)}function c(t){sr(i,n,o,a,c,"throw",t)}a(void 0)}))}}function fr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hr(n.key),n)}}function hr(t){var e=function(t,e){if("object"!=cr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cr(e)?e:e+""}function pr(t,e,r){dr(t,e),e.set(t,r)}function dr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yr(t,e,r){return t.set(mr(t,e),r),r}function vr(t,e){return t.get(mr(t,e))}function mr(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var gr=new WeakMap,br=new WeakMap,wr=new WeakMap,kr=new WeakMap,Er=new WeakMap,Lr=new WeakMap,xr=new WeakMap,_r=new WeakMap,Sr=new WeakMap,Or=new WeakMap,jr=new WeakSet,Pr=new WeakMap,Tr=function(){return t=function t(){var e,r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),dr(e=this,r=jr),r.add(e),pr(this,gr,null),pr(this,br,null),pr(this,wr,null),pr(this,kr,null),pr(this,Er,null),pr(this,Lr,null),pr(this,xr,null),pr(this,_r,null),pr(this,Sr,null),pr(this,Or,null),pr(this,Pr,function(){var t=lr(ur().mark((function t(e){var r,o,i,a,c;return ur().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),mr(jr,n,Nr).call(n)){t.next=5;break}return(r=vr(gr,n).querySelector('.error-message[style*="block"]'))&&r.focus(),t.abrupt("return");case 5:return o=[vr(br,n),vr(wr,n),vr(kr,n)],(0,ut.kK)(vr(Lr,n),vr(Er,n),!0,o),i=vr(br,n).value,a=vr(wr,n).value,c=vr(kr,n).value,t.prev=10,t.next=14,M({name:i,email:a,password:c});case 14:t.sent.error||((0,ut.uT)("Registrasi berhasil! Silakan login."),location.hash="#/login"),t.next=24;break;case 18:t.prev=18,t.t0=t.catch(10),(0,ut.yf)(vr(xr,n),"Registrasi gagal: ".concat(t.t0.message)),t.t0.message.toLowerCase().includes("email")?((0,ut.yf)(vr(Sr,n),t.t0.message,vr(wr,n)),vr(wr,n)&&vr(wr,n).select()):vr(xr,n).focus(),(0,ut.kK)(vr(Lr,n),vr(Er,n),!1,o);case 24:case"end":return t.stop()}}),t,null,[[10,18]])})));return function(e){return t.apply(this,arguments)}}()),this.title="Register - Dicoding Story App"},e=[{key:"render",value:(o=lr(ur().mark((function t(){return ur().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container auth-page" aria-labelledby="page-heading">\n        <h1 id="page-heading">Register</h1>\n        <form id="register-form" novalidate>\n          <div class="form-group">\n            <label for="name">Nama:</label>\n            <input type="text" id="name" name="name" required autocomplete="name" minlength="3" placeholder="Nama lengkap" aria-describedby="name-error" aria-required="true">\n            <p id="name-error" class="error-message" style="display: none;" role="alert"></p>\n          </div>\n          <div class="form-group">\n            <label for="email">Email:</label>\n            <input type="email" id="email" name="email" required autocomplete="email" placeholder="Alamat email" aria-describedby="email-error" aria-required="true">\n            <p id="email-error" class="error-message" style="display: none;" role="alert"></p>\n          </div>\n          <div class="form-group">\n            <label for="password">Password:</label>\n            <input type="password" id="password" name="password" required minlength="8" autocomplete="new-password" placeholder="Minimal 8 karakter" aria-describedby="password-error password-help" aria-required="true">\n            <p id="password-error" class="error-message" style="display: none;" role="alert"></p>\n          </div>\n           <div class="form-group form-actions">\n            <button type="submit" class="button button--primary" id="register-button">\n              <i class="fas fa-user-plus" aria-hidden="true"></i> Daftar\n            </button>\n            <div id="loading-indicator" class="loading-indicator" style="display: none;" role="status">\n                 <div class="spinner spinner--small" aria-hidden="true"></div> Mendaftar...\n            </div>\n          </div>\n           <p id="form-error-message" class="error-message" style="display: none;" role="alert" tabindex="-1"></p>\n          <p>Sudah punya akun? <a href="#/login">Login di sini</a></p>\n        </form>\n      </section>\n    ');case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=lr(ur().mark((function t(){return ur().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(mr(jr,this,Cr).call(this),vr(gr,this)){t.next=4;break}return t.abrupt("return");case 4:vr(gr,this).removeEventListener("submit",vr(Pr,this)),vr(gr,this).addEventListener("submit",vr(Pr,this)),vr(br,this)&&vr(br,this).focus();case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&fr(t.prototype,e),r&&fr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Nr(){(0,ut.Y7)(vr(xr,this)),(0,ut.Y7)(vr(_r,this),vr(br,this)),(0,ut.Y7)(vr(Sr,this),vr(wr,this)),(0,ut.Y7)(vr(Or,this),vr(kr,this));var t=!0;if(vr(br,this).checkValidity()||((0,ut.yf)(vr(_r,this),vr(br,this).validationMessage||"Nama tidak valid.",vr(br,this)),t=!1),vr(wr,this).checkValidity()||((0,ut.yf)(vr(Sr,this),vr(wr,this).validationMessage||"Email tidak valid.",vr(wr,this)),t=!1),!vr(kr,this).checkValidity()){var e=vr(kr,this).validationMessage||"Password tidak valid.";vr(kr,this).validity.tooShort?e="Password minimal 8 karakter.":vr(kr,this).validity.valueMissing&&(e="Password tidak boleh kosong."),(0,ut.yf)(vr(Or,this),e,vr(kr,this)),t=!1}return t||vr(_r,this).textContent||vr(Sr,this).textContent||vr(Or,this).textContent||(0,ut.yf)(vr(xr,this),"Mohon periksa isian."),t}function Cr(){yr(gr,this,document.getElementById("register-form")),yr(br,this,document.getElementById("name")),yr(wr,this,document.getElementById("email")),yr(kr,this,document.getElementById("password")),yr(Er,this,document.getElementById("register-button")),yr(Lr,this,document.getElementById("loading-indicator")),yr(xr,this,document.getElementById("form-error-message")),yr(_r,this,document.getElementById("name-error")),yr(Sr,this,document.getElementById("email-error")),yr(Or,this,document.getElementById("password-error"))}function Ir(t){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(t)}function Mr(){Mr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ir(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ir(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ar(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Gr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Br(n.key),n)}}function Br(t){var e=function(t,e){if("object"!=Ir(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ir(e)?e:e+""}var Fr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.selectedLocation={lat:null,lon:null},this.photoFile=null},e=[{key:"submitStory",value:(n=Mr().mark((function t(e){return Mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,R({description:e.description,photo:this.photoFile,lat:this.selectedLocation.lat,lon:this.selectedLocation.lon});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){Ar(i,r,o,a,c,"next",t)}function c(t){Ar(i,r,o,a,c,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})},{key:"setPhotoFile",value:function(t){this.photoFile=t}},{key:"clearPhotoFile",value:function(){this.photoFile=null}},{key:"setLocation",value:function(t){this.selectedLocation=t}},{key:"hasPhoto",value:function(){return!!this.photoFile}},{key:"hasLocation",value:function(){return this.selectedLocation&&"number"==typeof this.selectedLocation.lat&&"number"==typeof this.selectedLocation.lon}}],e&&Gr(t.prototype,e),r&&Gr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Dr(t){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dr(t)}function Wr(){Wr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Dr(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Dr(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ur(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var Rr=null;function Yr(){var t;return t=Wr().mark((function t(e){var r;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){t.next=4;break}return alert("Browser Anda tidak mendukung akses kamera."),t.abrupt("return",!1);case 4:if(e){t.next=7;break}return t.abrupt("return",!1);case 7:return Hr(e),t.prev=8,t.next=12,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1});case 12:return Rr=t.sent,e.srcObject=Rr,t.next=16,new Promise((function(t,r){e.onloadedmetadata=function(){t()},setTimeout((function(){return r(new Error("Timeout waiting for video metadata"))}),5e3)}));case 16:return t.next=18,e.play();case 18:return t.abrupt("return",!0);case 22:return t.prev=22,t.t0=t.catch(8),r="Tidak dapat mengakses kamera. Pastikan izin diberikan.","NotAllowedError"===t.t0.name||"PermissionDeniedError"===t.t0.name?r="Anda tidak memberikan izin akses kamera.":"NotFoundError"===t.t0.name||"DevicesNotFoundError"===t.t0.name?r="Tidak ada kamera yang ditemukan di perangkat ini.":"NotReadableError"===t.t0.name||"TrackStartError"===t.t0.name?r="Kamera sedang digunakan oleh aplikasi lain atau terjadi error hardware.":t.t0.message.includes("Timeout")&&(r="Gagal memuat metadata video kamera."),alert(r),Hr(e),Rr=null,t.abrupt("return",!1);case 31:case"end":return t.stop()}}),t,null,[[8,22]])})),Yr=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ur(i,n,o,a,c,"next",t)}function c(t){Ur(i,n,o,a,c,"throw",t)}a(void 0)}))},Yr.apply(this,arguments)}function Hr(t){if(Rr&&(Rr.getTracks().forEach((function(t){t.stop()})),Rr=null),t&&t.srcObject){try{var e=t.srcObject;e&&"function"==typeof e.getTracks&&e.getTracks().forEach((function(t){return t.stop()}))}catch(t){}t.srcObject=null,t.load()}}function qr(t){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function zr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kr(n.key),n)}}function Kr(t){var e=function(t,e){if("object"!=qr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qr(e)?e:e+""}var Vr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=null,this.isCameraActive=!1,this.isSubmitting=!1,this.domElements={}},e=[{key:"render",value:function(){return'\n            <section class="container add-story-page" aria-labelledby="page-heading">\n                <h1 id="page-heading">Tambah Cerita Baru</h1>\n                <form id="add-story-form" novalidate>\n                    <div class="form-group">\n                        <label id="photo-label">Foto Cerita (Wajib, maks 1MB):</label>\n                        <div class="camera-controls" role="group" aria-labelledby="photo-label">\n                             <button type="button" id="start-camera-button" class="button button--secondary" aria-label="Gunakan kamera"><i class="fas fa-camera" aria-hidden="true"></i> Gunakan Kamera</button>\n                             <button type="button" id="capture-photo-button" class="button button--secondary" disabled aria-label="Ambil foto"><i class="fas fa-circle-notch" aria-hidden="true"></i> Ambil Foto</button>\n                             <button type="button" id="upload-file-button" class="button button--secondary" aria-label="Unggah foto"><i class="fas fa-upload" aria-hidden="true"></i> Unggah File</button>\n                             <input type="file" id="photo-file-input" accept="image/png, image/jpeg" style="display: none;" aria-hidden="true">\n                        </div>\n                        <div id="camera-container" class="camera-container" style="display: none; margin-top: 15px;"><video id="camera-video" playsinline muted autoplay aria-label="Pratinjau kamera"></video><canvas id="photo-canvas" style="display: none;" aria-hidden="true"></canvas></div>\n                        <img id="photo-preview" src="#" alt="Pratinjau foto cerita" style="margin-top: 15px; display: none;" />\n                        <p id="photo-error" class="error-message" role="alert" style="display: none; margin-top: 5px;"></p>\n                    </div>\n                    <div class="form-group">\n                        <label for="story-description">Deskripsi Cerita (Wajib):</label>\n                        <textarea id="story-description" name="description" required rows="5" placeholder="Tulis deskripsi ceritamu di sini..." aria-describedby="desc-error" aria-required="true"></textarea>\n                         <p id="desc-error" class="error-message" role="alert" style="display: none;"></p>\n                    </div>\n                    <div class="form-group">\n                        <label id="location-label" for="location-map">Lokasi Cerita (Opsional):</label>\n                        <p><small>Klik di peta, geser marker, atau gunakan lokasi saat ini.</small></p>\n                        <div class="location-controls">\n                            <button type="button" id="get-current-location-button" class="button button--secondary">\n                                <i class="fas fa-map-marker-alt" aria-hidden="true"></i> Gunakan Lokasi Saya\n                            </button>\n                            <span id="location-feedback" class="location-feedback" aria-live="polite"></span>\n                        </div>\n                        <div id="location-map" style="margin-top: 10px;" role="application" aria-labelledby="location-label"></div>\n                        <p id="selected-coords" style="margin-top: 10px;" aria-live="polite"></p>\n                    </div>\n                    <div class="form-actions">\n                        <button type="submit" class="button button--primary" id="submit-story-button"><i class="fas fa-share" aria-hidden="true"></i> Bagikan Cerita</button>\n                         <div id="loading-indicator" class="loading-indicator" style="display: none;" role="status"><div class="spinner spinner--small"></div> Mengirim...</div>\n                    </div>\n                    <p id="form-error-message" class="error-message" role="alert" style="display: none;" tabindex="-1"></p>\n                </form>\n            </section>\n        '}},{key:"cacheDOMElements",value:function(){this.domElements={form:document.getElementById("add-story-form"),descriptionInput:document.getElementById("story-description"),descriptionErrorElement:document.getElementById("desc-error"),videoElement:document.getElementById("camera-video"),canvasElement:document.getElementById("photo-canvas"),photoPreviewElement:document.getElementById("photo-preview"),photoFileInput:document.getElementById("photo-file-input"),photoErrorElement:document.getElementById("photo-error"),cameraContainer:document.getElementById("camera-container"),startCameraButton:document.getElementById("start-camera-button"),capturePhotoButton:document.getElementById("capture-photo-button"),uploadFileButton:document.getElementById("upload-file-button"),selectedCoordsElement:document.getElementById("selected-coords"),submitButton:document.getElementById("submit-story-button"),loadingIndicator:document.getElementById("loading-indicator"),formErrorMessageElement:document.getElementById("form-error-message"),getCurrentLocationButton:document.getElementById("get-current-location-button"),locationFeedbackElement:document.getElementById("location-feedback")}}},{key:"updateSelectedCoordsText",value:function(t){var e=this.domElements.selectedCoordsElement;e&&t&&"number"==typeof t.lat&&"number"==typeof t.lon?e.textContent="Latitude: ".concat(t.lat.toFixed(5),", Longitude: ").concat(t.lon.toFixed(5)):e&&(e.textContent="")}},{key:"initMapInput",value:function(t){try{if(this.map=function(t){var e=arguments.length>2?arguments[2]:void 0,r=pt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-6.2,106.816666],13);if(!r)return null;if(r.off("click"),r.on("click",(function(t){var n=t.latlng,o=n.lat,i=n.lng;ft&&r.hasLayer(ft)&&r.removeLayer(ft),(ft=L.marker([o,i],{draggable:!0}).addTo(r)).bindPopup("Lokasi dipilih: ".concat(o.toFixed(5),", ").concat(i.toFixed(5))).openPopup(),ft.off("dragend").on("dragend",(function(t){var r=t.target,n=r.getLatLng(),o={lat:n.lat,lon:n.lng};r.setPopupContent("Lokasi dipilih: ".concat(o.lat.toFixed(5),", ").concat(o.lon.toFixed(5))).openPopup(),e&&e(o)})),e&&e({lat:o,lon:i})})),!r.getContainer().querySelector(".map-instruction-control")){var n=L.control({position:"bottomleft"});if(n.onAdd=function(t){return this._div=L.DomUtil.create("div","map-instruction map-instruction-control"),this.update(),this._div},n.update=function(){this._div.innerHTML="Klik peta / geser marker untuk pilih lokasi"},r&&r.addControl&&(n.addTo(r),!document.getElementById("map-instruction-style"))){var o=document.createElement("style");o.id="map-instruction-style",o.innerHTML=".map-instruction { padding: 6px 10px; font: 12px/1.5 Arial, Helvetica, sans-serif; background: rgba(255,255,255,0.9); box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 5px; text-align: center; color: #333; }",document.head.appendChild(o)}}return r}("location-map",void 0,t),!this.map)throw new Error("Map init returned null.");return!0}catch(t){var e=document.getElementById("location-map");return e&&(0,ut.yf)(e,"Gagal memuat peta lokasi."),!1}}},{key:"updateLocationFeedback",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.domElements.locationFeedbackElement;r&&(e?r.innerHTML='<i class="fas fa-spinner fa-spin"></i> '+t:r.textContent=t)}},{key:"setGetLocationButtonState",value:function(t){var e=this.domElements.getCurrentLocationButton;e&&(e.disabled=t)}},{key:"displayPhotoPreview",value:function(t){var e=this,r=this.domElements,n=r.photoPreviewElement,o=r.photoErrorElement;if(n){var i=new FileReader;i.onload=function(t){n.src=t.target.result,n.style.display="block",n.alt="Pratinjau foto yang dipilih"},i.onerror=function(t){(0,ut.yf)(o,"Gagal membaca file gambar."),e.clearPhotoSelection()},i.readAsDataURL(t)}}},{key:"clearPhotoSelection",value:function(){var t=this.domElements,e=t.photoPreviewElement,r=t.photoFileInput,n=t.photoErrorElement;e&&(e.style.display="none",e.src="#",e.alt="Pratinjau foto cerita"),r&&(r.value=""),(0,ut.Y7)(n)}},{key:"startCamera",value:function(){var t=this,e=this.domElements,r=e.startCameraButton,n=e.cameraContainer,o=e.capturePhotoButton,i=e.videoElement;return r&&n&&o&&i?(n.style.display="block",function(t){return Yr.apply(this,arguments)}(i).then((function(e){return e?(t.isCameraActive=!0,r.innerHTML='<i class="fas fa-times"></i> Tutup Kamera',o.disabled=!1,!0):(n.style.display="none",!1)}))):Promise.reject(new Error("Missing camera elements"))}},{key:"stopCamera",value:function(){var t=this.domElements,e=t.videoElement,r=t.cameraContainer,n=t.capturePhotoButton,o=t.startCameraButton;this.isCameraActive&&e&&(Hr(e),r&&(r.style.display="none"),n&&(n.disabled=!0),o&&(o.innerHTML='<i class="fas fa-camera"></i> Gunakan Kamera'),this.isCameraActive=!1)}},{key:"capturePhotoFromCamera",value:function(){var t=this.domElements,e=t.videoElement,r=t.canvasElement;return e&&r?function(t,e){if(!t||!e)return Promise.resolve(null);if(!Rr||!t.videoWidth||t.readyState<t.HAVE_CURRENT_DATA)return Promise.resolve(null);e.width=t.videoWidth,e.height=t.videoHeight;var r=e.getContext("2d");if(!r)return Promise.resolve(null);try{r.drawImage(t,0,0,e.width,e.height)}catch(t){return Promise.resolve(null)}return new Promise((function(t,r){try{e.toBlob((function(e){if(e){var r="dicoding-story-".concat(Date.now(),".jpeg"),n=new File([e],r,{type:"image/jpeg"});t(n)}else t(null)}),"image/jpeg",.9)}catch(t){r(t)}}))}(e,r):Promise.reject(new Error("Missing video/canvas elements"))}},{key:"validateForm",value:function(){var t=this.domElements,e=t.descriptionInput,r=t.descriptionErrorElement;t.photoErrorElement,t.isCameraActive,t.uploadFileButton,t.capturePhotoButton,t.startCameraButton,this.clearAllErrors();var n=!0;return e.value.trim()||((0,ut.yf)(r,"Deskripsi cerita tidak boleh kosong.",e),n=!1),n}},{key:"validatePhoto",value:function(t){var e=this.domElements,r=e.photoErrorElement,n=(e.isCameraActive,e.uploadFileButton),o=e.capturePhotoButton,i=e.startCameraButton;return!!t||((0,ut.yf)(r,"Foto cerita wajib diisi (dari kamera atau unggah file)."),n&&o&&i&&(!this.isCameraActive&&n?n.focus():this.isCameraActive&&o?o.focus():i&&i.focus()),!1)}},{key:"setFormSubmittingState",value:function(t){var e=this.domElements,r=e.loadingIndicator,n=e.submitButton,o=e.descriptionInput,i=e.startCameraButton,a=e.capturePhotoButton,c=e.uploadFileButton,u=e.photoFileInput,s=e.getCurrentLocationButton,l=e.form,f=[o,i,a,c,u,s,n];(0,ut.kK)(r,n,t,f),this.isSubmitting=t,l&&(t?l.setAttribute("aria-busy","true"):l.removeAttribute("aria-busy"))}},{key:"showFormError",value:function(t){var e=this.domElements.formErrorMessageElement;(0,ut.yf)(e,t),e&&e.focus()}},{key:"clearAllErrors",value:function(){var t=this.domElements,e=t.formErrorMessageElement,r=t.descriptionErrorElement,n=t.descriptionInput,o=t.photoErrorElement,i=t.locationFeedbackElement;(0,ut.Y7)(e),(0,ut.Y7)(r,n),(0,ut.Y7)(o),i&&(i.textContent="")}},{key:"updateMapMarker",value:function(t,e){var r=this;if(this.map){var n=[t,e],o="Lokasi dipilih: ".concat(t.toFixed(5),", ").concat(e.toFixed(5)),i=null;if(this.map.eachLayer((function(t){t instanceof L.Marker&&t.options.draggable&&(i=t)})),i)i.setLatLng(n).setPopupContent(o).openPopup();else{var a=L.marker(n,{draggable:!0}).addTo(this.map);a.bindPopup(o).openPopup(),a.on("dragend",(function(t){var e=t.target,n=e.getLatLng(),o={lat:n.lat,lon:n.lng};r.locationChangeCallback(o),e.setPopupContent("Lokasi dipilih: ".concat(n.lat.toFixed(5),", ").concat(n.lng.toFixed(5))).openPopup()}))}this.map.setView(n,16)}}},{key:"setLocationChangeCallback",value:function(t){this.locationChangeCallback=t}},{key:"cleanup",value:function(){var t;if(this.stopCamera(),null!==(t=this.map)&&void 0!==t&&t.remove)try{this.map.remove()}catch(t){}this.map=null,this.domElements={},this.isCameraActive=!1,this.isSubmitting=!1}},{key:"focusDescription",value:function(){var t=this.domElements.descriptionInput;t&&t.focus()}}],e&&zr(t.prototype,e),r&&zr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function $r(t){return $r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$r(t)}function Jr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qr(n.key),n)}}function Qr(t){var e=function(t,e){if("object"!=$r(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$r(e)?e:e+""}var Zr=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=e,this.view=r},e=[{key:"init",value:function(){this._registerEvents(),this._initMapInput(),this.view.focusDescription()}},{key:"_registerEvents",value:function(){var t=this.view.domElements,e=t.form,r=t.startCameraButton,n=t.capturePhotoButton,o=t.uploadFileButton,i=t.photoFileInput,a=t.getCurrentLocationButton;e&&e.addEventListener("submit",this._onFormSubmit.bind(this)),r&&r.addEventListener("click",this._onStartCameraClick.bind(this)),n&&n.addEventListener("click",this._onCapturePhotoClick.bind(this)),o&&i&&(o.addEventListener("click",(function(){return i.click()})),i.addEventListener("change",this._onFileInputChange.bind(this))),a&&a.addEventListener("click",this._onGetLocationClick.bind(this)),window.addEventListener("beforeunload",this.cleanup.bind(this)),window.addEventListener("hashchange",this.cleanup.bind(this))}},{key:"_initMapInput",value:function(){var t=this;this.view.setLocationChangeCallback((function(e){t.model.setLocation(e),t.view.updateSelectedCoordsText(e),t.view.updateLocationFeedback("")})),this.view.initMapInput((function(e){t.model.setLocation(e),t.view.updateSelectedCoordsText(e),t.view.updateLocationFeedback("")}))}},{key:"_onFormSubmit",value:function(t){var e=this;if(t.preventDefault(),!this.view.isSubmitting){var r=this.view.validateForm(),n=this.view.validatePhoto(this.model.hasPhoto());if(r&&n){var o=this.view.domElements.descriptionInput.value.trim();this.view.setFormSubmittingState(!0),this.model.submitStory({description:o}).then((function(){(0,ut.uT)("Cerita baru berhasil dibagikan!"),e.cleanup(),setTimeout((function(){location.hash="#/"}),1500)})).catch((function(t){e.view.showFormError("Gagal mengirim cerita: ".concat(t.message)),e.view.setFormSubmittingState(!1)}))}else{this.view.showFormError("Periksa kembali isian form yang wajib diisi.");var i=this.view.domElements.form.querySelector('[aria-invalid="true"]');i?i.focus():this.view.domElements.formErrorMessageElement.focus()}}}},{key:"_onStartCameraClick",value:function(){var t=this,e=this.view.domElements.startCameraButton;if(e){e.disabled=!0,this.view.clearAllErrors();try{this.view.isCameraActive?this.view.stopCamera():(this.view.clearPhotoSelection(),this.model.clearPhotoFile(),this.view.startCamera().catch((function(e){t.view.showFormError("Kesalahan Kamera: ".concat(e.message)),t.view.stopCamera()})))}catch(t){this.view.showFormError("Kesalahan Kamera: ".concat(t.message)),this.view.stopCamera()}finally{e.disabled=!1}}}},{key:"_onCapturePhotoClick",value:function(){var t=this,e=this.view.domElements.capturePhotoButton;e&&(e.disabled=!0,this.view.clearAllErrors(),this.view.capturePhotoFromCamera().then((function(r){r?(t.model.setPhotoFile(r),t.view.displayPhotoPreview(r),t.view.stopCamera(),t.view.focusDescription()):(t.view.showElementError(t.view.domElements.photoErrorElement,"Gagal mengambil foto dari kamera."),e.disabled=!1)})).catch((function(r){t.view.showElementError(t.view.domElements.photoErrorElement,"Error pengambilan foto: ".concat(r.message)),e.disabled=!1})))}},{key:"_onFileInputChange",value:function(t){var e,r=this.view.domElements,n=r.photoFileInput,o=r.photoErrorElement;if(null!==(e=t.target.files)&&void 0!==e&&e[0]){var i=t.target.files[0];if(this.view.clearAllErrors(),i){if(i.size>1048576)return this.view.showElementError(o,"Ukuran file melebihi ".concat(1,"MB.")),n.value="",this.view.clearPhotoSelection(),void this.model.clearPhotoFile();if(!i.type.startsWith("image/"))return this.view.showElementError(o,"File yang dipilih bukan gambar."),n.value="",this.view.clearPhotoSelection(),void this.model.clearPhotoFile();this.model.setPhotoFile(i),this.view.displayPhotoPreview(i),this.view.stopCamera(),this.view.focusDescription()}}}},{key:"_onGetLocationClick",value:function(){return navigator.geolocation?this.view.map?(this.view.updateLocationFeedback("Mencari lokasi...",!0),this.view.setGetLocationButtonState(!0),this.view.clearAllErrors(),void navigator.geolocation.getCurrentPosition(this._onGeolocationSuccess.bind(this),this._onGeolocationError.bind(this),{enableHighAccuracy:!1,timeout:15e3,maximumAge:0})):((0,ut.f1)("Peta belum siap. Silakan tunggu sebentar."),void this.view.updateLocationFeedback("Peta belum siap.")):((0,ut.f1)("Browser Anda tidak mendukung Geolocation."),void this.view.updateLocationFeedback("Geolocation tidak didukung."))}},{key:"_onGeolocationSuccess",value:function(t){var e=this,r=t.coords.latitude,n=t.coords.longitude,o={lat:r,lon:n};this.model.setLocation(o),this.view.updateSelectedCoordsText(o),this.view.updateLocationFeedback("Lokasi ditemukan!"),this.view.setGetLocationButtonState(!1),this.view.updateMapMarker(r,n),setTimeout((function(){e.view.domElements.locationFeedbackElement&&"Lokasi ditemukan!"===e.view.domElements.locationFeedbackElement.textContent&&e.view.updateLocationFeedback("")}),2500)}},{key:"_onGeolocationError",value:function(t){var e="Tidak dapat mengambil lokasi Anda.";switch(t.code){case t.PERMISSION_DENIED:e="Anda menolak izin akses lokasi.";break;case t.POSITION_UNAVAILABLE:e="Informasi lokasi tidak tersedia.";break;case t.TIMEOUT:e="Waktu habis saat mencoba mengambil lokasi."}this.view.updateLocationFeedback("Error: ".concat(e)),(0,ut.f1)("Gagal mendapatkan lokasi: ".concat(e)),this.view.setGetLocationButtonState(!1)}},{key:"cleanup",value:function(){window.removeEventListener("beforeunload",this.cleanup.bind(this)),window.removeEventListener("hashchange",this.cleanup.bind(this)),this.view.cleanup()}}],e&&Jr(t.prototype,e),r&&Jr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Xr(t){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xr(t)}function tn(){tn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Xr(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Xr(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function en(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function rn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){en(i,n,o,a,c,"next",t)}function c(t){en(i,n,o,a,c,"throw",t)}a(void 0)}))}}function nn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,on(n.key),n)}}function on(t){var e=function(t,e){if("object"!=Xr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xr(e)?e:e+""}var an=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title="Tambah Cerita - Dicoding Story App",this.model=null,this.view=null,this.presenter=null},e=[{key:"render",value:(o=rn(tn().mark((function t(){return tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.view=new Vr,t.abrupt("return",this.view.render());case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=rn(tn().mark((function t(){return tn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.model=new Fr,this.view.cacheDOMElements(),this.presenter=new Zr(this.model,this.view),this.presenter.init();case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&nn(t.prototype,e),r&&nn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function cn(){var t=location.hash.slice(1);return t?t.startsWith("/")?t:"/".concat(t):"/"}const un=(t,e)=>e.some((e=>t instanceof e));let sn,ln;const fn=new WeakMap,hn=new WeakMap,pn=new WeakMap;let dn={get(t,e,r){if(t instanceof IDBTransaction){if("done"===e)return fn.get(t);if("store"===e)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return gn(t[e])},set:(t,e,r)=>(t[e]=r,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function yn(t){dn=t(dn)}function vn(t){return(ln||(ln=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(bn(this),e),gn(this.request)}:function(...e){return gn(t.apply(bn(this),e))}}function mn(t){return"function"==typeof t?vn(t):(t instanceof IDBTransaction&&function(t){if(fn.has(t))return;const e=new Promise(((e,r)=>{const n=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),n()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)}));fn.set(t,e)}(t),un(t,sn||(sn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,dn):t)}function gn(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,r)=>{const n=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(gn(t.result)),n()},i=()=>{r(t.error),n()};t.addEventListener("success",o),t.addEventListener("error",i)}));return pn.set(e,t),e}(t);if(hn.has(t))return hn.get(t);const e=mn(t);return e!==t&&(hn.set(t,e),pn.set(e,t)),e}const bn=t=>pn.get(t);const wn=["get","getKey","getAll","getAllKeys","count"],kn=["put","add","delete","clear"],En=new Map;function Ln(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(En.get(e))return En.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,o=kn.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!wn.includes(r))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return n&&(a=a.index(e.shift())),(await Promise.all([a[r](...e),o&&i.done]))[0]};return En.set(e,i),i}yn((t=>({...t,get:(e,r,n)=>Ln(e,r)||t.get(e,r,n),has:(e,r)=>!!Ln(e,r)||t.has(e,r)})));const xn=["continue","continuePrimaryKey","advance"],_n={},Sn=new WeakMap,On=new WeakMap,jn={get(t,e){if(!xn.includes(e))return t[e];let r=_n[e];return r||(r=_n[e]=function(...t){Sn.set(this,On.get(this)[e](...t))}),r}};async function*Pn(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const r=new Proxy(e,jn);for(On.set(r,e),pn.set(r,bn(e));e;)yield r,e=await(Sn.get(r)||e.continue()),Sn.delete(r)}function Tn(t,e){return e===Symbol.asyncIterator&&un(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&un(t,[IDBIndex,IDBObjectStore])}function Nn(t){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nn(t)}function Cn(){Cn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Nn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Nn(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function In(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?In(Object(r),!0).forEach((function(e){An(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function An(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Nn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Bn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Gn(i,n,o,a,c,"next",t)}function c(t){Gn(i,n,o,a,c,"throw",t)}a(void 0)}))}}yn((t=>({...t,get:(e,r,n)=>Tn(e,r)?Pn:t.get(e,r,n),has:(e,r)=>Tn(e,r)||t.has(e,r)})));var Fn="offline-stories",Dn=function(t,e,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),c=gn(a);return n&&a.addEventListener("upgradeneeded",(t=>{n(gn(a.result),t.oldVersion,t.newVersion,gn(a.transaction),t)})),r&&a.addEventListener("blocked",(t=>r(t.oldVersion,t.newVersion,t))),c.then((t=>{i&&t.addEventListener("close",(()=>i())),o&&t.addEventListener("versionchange",(t=>o(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),c}("storyapp-db",1,{upgrade:function(t){t.objectStoreNames.contains(Fn)||t.createObjectStore(Fn,{keyPath:"id"})}}),Wn=function(){var t=Bn(Cn().mark((function t(e){var r,n,o,i,a;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.id){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,Un(e.photoUrl);case 6:return r=t.sent,n=Mn(Mn({},e),{},{photoBlob:r,photoUrl:e.photoUrl}),t.next=10,Dn;case 10:return o=t.sent,i=o.transaction(Fn,"readwrite"),a=i.objectStore(Fn),t.next=15,a.put(n);case 15:return t.next=17,i.done;case 17:t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(3),t.t0;case 24:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}(),Un=function(){var t=Bn(Cn().mark((function t(e){var r,n;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:return r=t.sent,t.next=6,r.blob();case 6:return n=t.sent,t.abrupt("return",n);case 10:return t.prev=10,t.t0=t.catch(0),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),Rn=function(){var t=Bn(Cn().mark((function t(){var e,r,n,o;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Dn;case 3:return e=t.sent,r=e.transaction(Fn,"readonly"),n=r.objectStore(Fn),t.next=8,n.getAll();case 8:return o=t.sent,t.next=11,r.done;case 11:return t.abrupt("return",o);case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",[]);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),Yn=function(){var t=Bn(Cn().mark((function t(e){var r,n,o,i;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",null);case 2:return t.prev=2,t.next=5,Dn;case 5:return r=t.sent,n=r.transaction(Fn,"readonly"),o=n.objectStore(Fn),t.next=10,o.get(e);case 10:return i=t.sent,t.next=13,n.done;case 13:return t.abrupt("return",i);case 17:return t.prev=17,t.t0=t.catch(2),t.abrupt("return",null);case 21:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}(),Hn=function(){var t=Bn(Cn().mark((function t(e){var r,n,o;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,Dn;case 6:return r=t.sent,n=r.transaction(Fn,"readwrite"),o=n.objectStore(Fn),t.next=11,o.delete(e);case 11:return t.next=13,n.done;case 13:t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(3),t.t0;case 20:case"end":return t.stop()}}),t,null,[[3,16]])})));return function(e){return t.apply(this,arguments)}}();function qn(t){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qn(t)}function zn(){zn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==qn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(qn(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Kn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Vn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Kn(i,n,o,a,c,"next",t)}function c(t){Kn(i,n,o,a,c,"throw",t)}a(void 0)}))}}function $n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jn(n.key),n)}}function Jn(t){var e=function(t,e){if("object"!=qn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qn(e)?e:e+""}var Qn=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._story=null,this._isSavedOffline=!1},e=[{key:"fetchStory",value:(c=Vn(zn().mark((function t(e){var r,n;return zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W(e);case 3:if(!(r=t.sent).error&&r.story){t.next=6;break}throw new Error(r.message||"Data cerita tidak ditemukan.");case 6:return this._story=r.story,t.abrupt("return",this._story);case 10:return t.prev=10,t.t0=t.catch(0),t.next=14,this.getOfflineStory(e);case 14:if(!(n=t.sent)){t.next=19;break}return this._story=n,this._isSavedOffline=!0,t.abrupt("return",this._story);case 19:throw t.t0;case 20:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(t){return c.apply(this,arguments)})},{key:"checkOfflineStatus",value:(a=Vn(zn().mark((function t(e){var r;return zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Yn(e);case 3:return r=t.sent,this._isSavedOffline=!!r,t.abrupt("return",this._isSavedOffline);case 8:return t.prev=8,t.t0=t.catch(0),this._isSavedOffline=!1,t.abrupt("return",!1);case 12:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(t){return a.apply(this,arguments)})},{key:"saveStoryOffline",value:(i=Vn(zn().mark((function t(){return zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._story){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,Wn(this._story);case 4:return this._isSavedOffline=!0,t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"getOfflineStory",value:(o=Vn(zn().mark((function t(e){return zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yn(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"deleteStoryOffline",value:(n=Vn(zn().mark((function t(){return zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._story){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,Hn(this._story.id);case 4:return this._isSavedOffline=!1,t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"isOfflineSaved",value:function(){return this._isSavedOffline}},{key:"getStory",value:function(){return this._story}},{key:"setOfflineStatus",value:function(t){this._isSavedOffline=t}},{key:"setStory",value:function(t){this._story=t}}],e&&$n(t.prototype,e),r&&$n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i,a,c}();function Zn(t){return Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zn(t)}function Xn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function to(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xn(Object(r),!0).forEach((function(e){eo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function eo(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=Zn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ro(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id-ID",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1};try{if(e=new Date(t),isNaN(e.getTime()))throw new Error("Invalid date value provided")}catch(t){return"Tanggal tidak valid"}try{return new Intl.DateTimeFormat(r,to(to({},o),n)).format(e).replace(/\./g,":")}catch(t){try{return e.toLocaleTimeString(r,to(to({},o),n))}catch(t){return"Error format tanggal"}}}function no(t){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},no(t)}function oo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,io(n.key),n)}}function io(t){var e=function(t,e){if("object"!=no(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=no(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==no(e)?e:e+""}var ao=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pageContainer=null,this._imageElement=null,this._saveOfflineButton=null,this._map=null,this._blobUrl=null},e=[{key:"getTemplate",value:function(){return'\n            <section class="container detail-story-page" id="detail-story-container" aria-live="polite" aria-busy="true">\n                <div class="content-loading-indicator" role="status">\n                    <div class="spinner" aria-hidden="true"></div>\n                    <p>Memuat detail cerita...</p>\n                </div>\n            </section>\n        '}},{key:"setUp",value:function(){return this._pageContainer=document.getElementById("detail-story-container"),this._pageContainer}},{key:"showLoading",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Memuat detail cerita...";(0,ut.$f)(this._pageContainer,!0,t)}},{key:"hideLoading",value:function(){var t;(0,ut.$f)(this._pageContainer,!1),null===(t=this._pageContainer)||void 0===t||t.removeAttribute("aria-busy")}},{key:"showError",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error Memuat Cerita";document.title=n,(0,ut.yf)(this._pageContainer,t,null),null===(e=this._pageContainer)||void 0===e||e.removeAttribute("aria-busy");var o=null===(r=this._pageContainer)||void 0===r?void 0:r.querySelector(".error-message");o&&o.focus()}},{key:"showOfflineNotification",value:function(){(0,ut.Ds)("Menampilkan versi offline karena gagal mengambil data terbaru.","info",5e3)}},{key:"renderStoryDetails",value:function(t,e){if(t&&this._pageContainer){var r,n=t.name,o=void 0===n?"Tanpa Nama":n,i=t.description,a=void 0===i?"Tidak ada deskripsi.":i,c=t.photoUrl,u=t.photoBlob,s=t.createdAt,l=t.lat,f=t.lon,h=s?ro(s):"Tanggal tidak tersedia",p="images/placeholder.png";u?(r=URL.createObjectURL(u),this._blobUrl=r):r=c||p;var d="number"==typeof l&&"number"==typeof f&&!isNaN(l)&&!isNaN(f),y=e?'<i class="fas fa-trash-alt"></i> Hapus dari Offline':'<i class="fas fa-save"></i> Simpan Offline',v=e?"button--danger":"button--success";this._pageContainer.innerHTML='\n          <h1 id="detail-page-heading" tabindex="-1">Cerita oleh '.concat(o," ").concat(e?'<span style="font-size: 0.7em; color: var(--medium-text); font-weight: normal;">(Offline)</span>':"",'</h1>\n          <div class="detail-story__layout">\n              <div class="detail-story__media" role="button" aria-label="Perbesar gambar cerita">\n                   <img src="').concat(r,'" alt="Gambar cerita oleh ').concat(o,'" class="detail-story__image" onerror="this.onerror=null; this.src=\'').concat(p,"'; this.alt='Gagal memuat gambar cerita oleh ").concat(o,'\';">\n              </div>\n              <div class="detail-story__content">\n                   <p class="detail-story__date" aria-label="Tanggal dibuat">\n                       <i class="far fa-calendar-alt" aria-hidden="true"></i> Dibuat pada: ').concat(h,'\n                   </p>\n                   <p class="detail-story__description">').concat(a,"</p>\n                   ").concat(d?'\n                       <div class="detail-story__location">\n                           <h2>Lokasi Cerita</h2>\n                           <div id="detail-story-map" class="detail-story__map" role="application" aria-label="Peta lokasi cerita">\n                               <div class="content-loading-indicator" role="status"><p>Memuat peta...</p></div>\n                           </div>\n                       </div>\n                   ':'\n                       <p class="detail-story__no-location">\n                           <i class="fas fa-map-marker-slash" aria-hidden="true"></i> Lokasi tidak tersedia untuk cerita ini.\n                       </p>\n                   ','\n                   <div class="detail-story__actions">\n                        <button id="save-offline-button" class="button ').concat(v,'" aria-live="polite">\n                           ').concat(y,'\n                       </button>\n                   </div>\n              </div>\n          </div>\n          <div class="detail-story__actions">\n                       <a href="#/" class="button button--secondary"><i class="fas fa-arrow-left" aria-hidden="true"></i> Kembali ke Beranda</a>\n                   </div>\n        '),this._imageElement=this._pageContainer.querySelector(".detail-story__image"),this._saveOfflineButton=this._pageContainer.querySelector("#save-offline-button");var m=document.getElementById("detail-page-heading");m&&m.focus()}}},{key:"updatePageTitle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"(Offline) Cerita oleh ".concat(t," - Dicoding Story App"):"Cerita oleh ".concat(t," - Dicoding Story App");return document.title=e,e}},{key:"setupImageClickListener",value:function(t){var e,r=null===(e=this._imageElement)||void 0===e?void 0:e.closest(".detail-story__media");r&&(r.addEventListener("click",t),r.style.cursor="zoom-in")}},{key:"removeImageClickListener",value:function(t){var e,r=null===(e=this._imageElement)||void 0===e?void 0:e.closest(".detail-story__media");r&&(r.removeEventListener("click",t),r.style.cursor="")}},{key:"setupSaveOfflineButton",value:function(t){this._saveOfflineButton&&this._saveOfflineButton.addEventListener("click",t)}},{key:"removeSaveOfflineButtonListener",value:function(t){this._saveOfflineButton&&this._saveOfflineButton.removeEventListener("click",t)}},{key:"updateSaveButtonState",value:function(t){if(this._saveOfflineButton){var e=t?'<i class="fas fa-trash-alt"></i> Hapus dari Offline':'<i class="fas fa-save"></i> Simpan Offline',r=t?"button--danger":"button--success";this._saveOfflineButton.innerHTML=e,this._saveOfflineButton.className="button ".concat(r)}}},{key:"setSaveButtonLoading",value:function(){this._saveOfflineButton&&(this._saveOfflineButton.disabled=!0,this._saveOfflineButton.innerHTML='<span class="spinner spinner--small"></span> Memproses...')}},{key:"enableSaveButton",value:function(){this._saveOfflineButton&&(this._saveOfflineButton.disabled=!1)}},{key:"getMapContainer",value:function(){return document.getElementById("detail-story-map")}},{key:"setMapInstance",value:function(t){this._map=t}},{key:"getMapInstance",value:function(){return this._map}},{key:"setupMapLoadingIndicator",value:function(){var t=this.getMapContainer();if(t){var e=t.querySelector(".content-loading-indicator");e&&t.removeChild(e)}}},{key:"showMapError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Gagal memuat peta lokasi.",e=this.getMapContainer();e&&(0,ut.yf)(e,t)}},{key:"cleanup",value:function(){if(this._blobUrl&&(URL.revokeObjectURL(this._blobUrl),this._blobUrl=null),this._map&&"function"==typeof this._map.remove){try{this._map.remove()}catch(t){}this._map=null}this._pageContainer=null,this._imageElement=null,this._saveOfflineButton=null}}],e&&oo(t.prototype,e),r&&oo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function co(t){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},co(t)}function uo(){uo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==co(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(co(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function so(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function lo(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){so(i,n,o,a,c,"next",t)}function c(t){so(i,n,o,a,c,"throw",t)}a(void 0)}))}}function fo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ho(n.key),n)}}function ho(t){var e=function(t,e){if("object"!=co(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=co(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==co(e)?e:e+""}var po=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=e,this._model=r,this._boundHandleImageClick=this._handleImageClick.bind(this),this._boundHandleSaveOfflineClick=this._handleSaveOfflineClick.bind(this),this._boundCleanup=this._cleanup.bind(this)},e=[{key:"init",value:(o=lo(uo().mark((function t(e){var r,n;return uo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return this._view.hideLoading(),this._view.showError("Cerita tidak dapat dimuat: ID tidak ditemukan pada URL.","ID Tidak Ditemukan"),t.abrupt("return");case 4:return this._view.showLoading(),t.prev=5,t.next=8,this._model.fetchStory(e);case 8:if(r=t.sent,n=this._model.isOfflineSaved(),this._view.updatePageTitle(r.name,n),!n){t.next=15;break}this._view.showOfflineNotification(),t.next=17;break;case 15:return t.next=17,this._model.checkOfflineStatus(r.id);case 17:this._view.renderStoryDetails(r,this._model.isOfflineSaved()),this._view.hideLoading(),this._view.setupImageClickListener(this._boundHandleImageClick),this._view.setupSaveOfflineButton(this._boundHandleSaveOfflineClick),"number"==typeof r.lat&&"number"==typeof r.lon&&this._initStoryMap(),this._attachCleanupListener(),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(5),this._view.hideLoading(),this._view.showError("Cerita gagal dimuat: ".concat(t.t0.message,". Tidak ditemukan versi offline."));case 29:case"end":return t.stop()}}),t,this,[[5,25]])}))),function(t){return o.apply(this,arguments)})},{key:"_handleImageClick",value:function(t){t.stopPropagation();var e=this._model.getStory();if(e){var r=this._view._blobUrl||e.photoUrl;r&&(0,ut.Lu)(r,"Cerita oleh ".concat(e.name||"Anonim"))}}},{key:"_handleSaveOfflineClick",value:(n=lo(uo().mark((function t(){var e,r;return uo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this._model.getStory())&&e.id){t.next=3;break}return t.abrupt("return");case 3:if(this._view.setSaveButtonLoading(),t.prev=4,!this._model.isOfflineSaved()){t.next=11;break}return t.next=8,this._model.deleteStoryOffline();case 8:(0,ut.uT)('Cerita "'.concat(e.name,'" dihapus dari penyimpanan offline.')),t.next=14;break;case 11:return t.next=13,this._model.saveStoryOffline();case 13:(0,ut.uT)('Cerita "'.concat(e.name,'" disimpan untuk akses offline.'));case 14:this._view.updateSaveButtonState(this._model.isOfflineSaved()),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(4),r=this._model.isOfflineSaved()?"menghapus":"menyimpan",(0,ut.f1)("Gagal ".concat(r," cerita: ").concat(t.t0.message));case 21:return t.prev=21,this._view.enableSaveButton(),this._view.updateSaveButtonState(this._model.isOfflineSaved()),t.finish(21);case 25:case"end":return t.stop()}}),t,this,[[4,17,21,25]])}))),function(){return n.apply(this,arguments)})},{key:"_initStoryMap",value:function(){var t=this._model.getStory();if(t&&"number"==typeof t.lat&&"number"==typeof t.lon){var e=this._view.getMapContainer();if(e){this._view.setupMapLoadingIndicator();try{var r=[t.lat,t.lon];if(e._leaflet_id){var n=vt();n&&"detail-story-map"===n.getContainer().id&&n.remove()}var o=pt("detail-story-map",r,15);this._view.setMapInstance(o),o?(dt(r,"Lokasi cerita oleh ".concat(t.name||"Anonim"),{draggable:!1}),o.eachLayer((function(t){t instanceof L.Marker&&t.openPopup()}))):this._view.showMapError()}catch(t){this._view.showMapError()}}}}},{key:"_attachCleanupListener",value:function(){window.removeEventListener("hashchange",this._boundCleanup),window.addEventListener("hashchange",this._boundCleanup,{once:!0})}},{key:"_cleanup",value:function(){this._view.removeImageClickListener(this._boundHandleImageClick),this._view.removeSaveOfflineButtonListener(this._boundHandleSaveOfflineClick);var t=this._view.getMapInstance();if(t&&"function"==typeof t.remove)try{t.remove()}catch(t){}else{var e=vt();if(e&&e.getContainer()&&"detail-story-map"===e.getContainer().id)try{e.remove()}catch(t){}}window.removeEventListener("hashchange",this._boundCleanup),this._view.cleanup()}}],e&&fo(t.prototype,e),r&&fo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function yo(t){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yo(t)}function vo(){vo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==yo(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(yo(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function mo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function go(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){mo(i,n,o,a,c,"next",t)}function c(t){mo(i,n,o,a,c,"throw",t)}a(void 0)}))}}function bo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wo(n.key),n)}}function wo(t){var e=function(t,e){if("object"!=yo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yo(e)?e:e+""}var ko=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title="Memuat Cerita...",this._model=new Qn,this._view=new ao,this._presenter=new po(this._view,this._model)},e=[{key:"render",value:(o=go(vo().mark((function t(){return vo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._view.getTemplate());case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=go(vo().mark((function t(){var e,r;return vo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._view.setUp()){t.next=3;break}return t.abrupt("return");case 3:return n=void 0,o=void 0,o=cn(),e=1===(n=o.replace(/^\/|\/$/g,"").split("/")).length&&""===n[0]?{resource:null,id:null,verb:null}:{resource:n[0]||null,id:n[1]||null,verb:n[2]||null},r=e.id,t.next=7,this._presenter.init(r);case 7:case"end":return t.stop()}var n,o}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&bo(t.prototype,e),r&&bo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Eo(t){return Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eo(t)}function Lo(){Lo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Eo(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Eo(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function xo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _o(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xo(i,n,o,a,c,"next",t)}function c(t){xo(i,n,o,a,c,"throw",t)}a(void 0)}))}}function So(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oo(n.key),n)}}function Oo(t){var e=function(t,e){if("object"!=Eo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Eo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Eo(e)?e:e+""}function jo(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Po(t,e){return t.get(No(t,e))}function To(t,e,r){return t.set(No(t,e),r),r}function No(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Co=new WeakMap,Io=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),jo(this,Co,[])},e=[{key:"loadStories",value:(o=_o(Lo().mark((function t(){return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=To,t.t1=Co,t.t2=this,t.next=6,Rn();case 6:return t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),Po(Co,this).forEach((function(t){!t.photoBlob&&t.photoUrl})),t.abrupt("return",Po(Co,this));case 12:throw t.prev=12,t.t4=t.catch(0),t.t4;case 16:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return o.apply(this,arguments)})},{key:"getStories",value:function(){return Po(Co,this)}},{key:"deleteStory",value:(n=_o(Lo().mark((function t(e){return Lo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Hn(e);case 3:return To(Co,this,Po(Co,this).filter((function(t){return t.id!==e}))),t.abrupt("return",!0);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(t){return n.apply(this,arguments)})},{key:"findStory",value:function(t){return Po(Co,this).find((function(e){return e.id===t}))}},{key:"isEmpty",value:function(){return 0===Po(Co,this).length}}],e&&So(t.prototype,e),r&&So(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Mo(t){return Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mo(t)}function Ao(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Go(n.key),n)}}function Go(t){var e=function(t,e){if("object"!=Mo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mo(e)?e:e+""}function Bo(t,e,r){Fo(t,e),e.set(t,r)}function Fo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Do(t,e){return t.get(Uo(t,e))}function Wo(t,e,r){return t.set(Uo(t,e),r),r}function Uo(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Ro=new WeakMap,Yo=new WeakMap,Ho=new WeakSet,qo=function(){return t=function t(){var e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Fo(e=this,r=Ho),r.add(e),Bo(this,Ro,null),Bo(this,Yo,{})},(e=[{key:"initializeView",value:function(t){Wo(Ro,this,t)}},{key:"registerCallback",value:function(t,e){Do(Yo,this)[t]=e}},{key:"getTemplate",value:function(){return'\n      <section class="container offline-page" id="offline-page-container" aria-labelledby="page-heading">\n        <h1 id="page-heading">Cerita Tersimpan Offline</h1>\n         <div id="offline-stories-list" class="stories-list" aria-live="polite" aria-busy="true">\n            <div class="content-loading-indicator" role="status">\n                <div class="spinner" aria-hidden="true"></div>\n                <p>Memuat cerita tersimpan...</p>\n            </div>\n         </div>\n      </section>\n    '}},{key:"setLoadingState",value:function(t){Do(Ro,this)&&((0,ut.$f)(Do(Ro,this),t,"Memuat cerita tersimpan..."),t||Do(Ro,this).removeAttribute("aria-busy"))}},{key:"showErrorMessage",value:function(){Do(Ro,this)&&(Do(Ro,this).innerHTML='<p class="error-message" style="text-align:center; padding: 20px;">Gagal memuat data offline.</p>')}},{key:"renderStories",value:function(t){var e=this;if(Do(Ro,this))if(Do(Ro,this).innerHTML="",0!==t.length){var r=document.createDocumentFragment();t.forEach((function(t){var n=document.createElement("div");n.className="offline-story-item-wrapper";var o=document.createElement("story-item");o.story=t,n.appendChild(o);var i=document.createElement("button");i.innerHTML='<i class="fas fa-trash-alt"></i> Hapus',i.className="button button--danger button--sm offline-delete-button",i.setAttribute("aria-label","Hapus cerita offline oleh ".concat(t.name)),i.dataset.id=t.id,i.addEventListener("click",(function(t){Do(Yo,e).delete&&Do(Yo,e).delete(t)})),n.appendChild(i),r.appendChild(n)})),Do(Ro,this).appendChild(r),Uo(Ho,this,zo).call(this)}else Do(Ro,this).innerHTML='<p style="text-align: center; padding: 20px; color: var(--medium-text);">Belum ada cerita yang disimpan untuk akses offline.</p>'}},{key:"showDeleteLoading",value:function(t){t.disabled=!0,t.innerHTML='<span class="spinner spinner--small"></span> Menghapus...'}},{key:"resetDeleteButton",value:function(t){t.disabled=!1,t.innerHTML='<i class="fas fa-trash-alt"></i> Hapus'}},{key:"removeStoryElement",value:function(t){var e,r=null===(e=Do(Ro,this).querySelector('.offline-delete-button[data-id="'.concat(t,'"]')))||void 0===e?void 0:e.closest(".offline-story-item-wrapper");r&&r.remove()}},{key:"cleanup",value:function(){var t,e=null===(t=Do(Ro,this))||void 0===t?void 0:t.querySelectorAll(".offline-delete-button");null==e||e.forEach((function(t){var e=t.cloneNode(!0);t.parentNode.replaceChild(e,t)})),Wo(Ro,this,null)}}])&&Ao(t.prototype,e),r&&Ao(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function zo(){if(!document.getElementById("offline-item-style")){var t=document.createElement("style");t.id="offline-item-style",t.innerHTML="\n          .offline-story-item-wrapper {\n              display: flex;\n              flex-direction: column;\n              gap: 0;\n              break-inside: avoid-column;\n              page-break-inside: avoid;\n              -webkit-column-break-inside: avoid;\n              margin-bottom: var(--spacing-lg);\n              position: relative;\n          }\n          .offline-story-item-wrapper story-item {\n             margin-bottom: 0 !important;\n             border-bottom-left-radius: 0;\n             border-bottom-right-radius: 0;\n             border-bottom: none;\n          }\n          .offline-delete-button {\n              border-top-left-radius: 0;\n              border-top-right-radius: 0;\n              width: 100%;\n              padding: var(--spacing-sm) var(--spacing-md);\n              font-size: 0.85rem;\n              border-top: 1px solid #6e3b3b;\n          }\n          .offline-delete-button .spinner {\n             border-left-color: white;\n          }\n      ",document.head.appendChild(t)}}function Ko(t){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ko(t)}function Vo(){Vo=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ko(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ko(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function $o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Jo(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$o(i,n,o,a,c,"next",t)}function c(t){$o(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Qo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zo(n.key),n)}}function Zo(t){var e=function(t,e){if("object"!=Ko(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ko(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ko(e)?e:e+""}function Xo(t,e,r){ti(t,e),e.set(t,r)}function ti(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ei(t,e){return t.get(ni(t,e))}function ri(t,e,r){return t.set(ni(t,e),r),r}function ni(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var oi=new WeakMap,ii=new WeakMap,ai=new WeakMap,ci=new WeakMap,ui=new WeakSet,si=function(){return t=function t(e,r){var n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ti(n=this,o=ui),o.add(n),Xo(this,oi,null),Xo(this,ii,null),Xo(this,ai,null),Xo(this,ci,null),ri(oi,this,e),ri(ii,this,r),ri(ai,this,ni(ui,this,li).bind(this)),ri(ci,this,this._cleanup.bind(this))},e=[{key:"initialize",value:(n=Jo(Vo().mark((function t(e){return Vo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ei(ii,this).initializeView(e),ei(ii,this).registerCallback("delete",ei(ai,this)),ei(ii,this).setLoadingState(!0),t.prev=3,t.next=6,ei(oi,this).loadStories();case 6:ei(ii,this).renderStories(ei(oi,this).getStories()),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),(0,ut.f1)("Gagal memuat cerita tersimpan."),ei(ii,this).showErrorMessage();case 13:return t.prev=13,ei(ii,this).setLoadingState(!1),ni(ui,this,hi).call(this),t.finish(13);case 17:case"end":return t.stop()}}),t,this,[[3,9,13,17]])}))),function(t){return n.apply(this,arguments)})},{key:"_cleanup",value:function(){ei(ii,this).cleanup(),window.removeEventListener("hashchange",ei(ci,this))}}],e&&Qo(t.prototype,e),r&&Qo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function li(t){return fi.apply(this,arguments)}function fi(){return(fi=Jo(Vo().mark((function t(e){var r,n,o,i;return Vo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.currentTarget,n=r.dataset.id){t.next=4;break}return t.abrupt("return");case 4:if(o=ei(oi,this).findStory(n),i=o?o.name:n,!confirm('Anda yakin ingin menghapus cerita "'.concat(i,'" dari penyimpanan offline?'))){t.next=20;break}return ei(ii,this).showDeleteLoading(r),t.prev=8,t.next=11,ei(oi,this).deleteStory(n);case 11:(0,ut.uT)("Cerita berhasil dihapus dari offline."),ei(ii,this).removeStoryElement(n),ei(oi,this).isEmpty()&&ei(ii,this).renderStories([]),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(8),(0,ut.f1)("Gagal menghapus cerita: ".concat(t.t0.message)),ei(ii,this).resetDeleteButton(r);case 20:case"end":return t.stop()}}),t,this,[[8,16]])})))).apply(this,arguments)}function hi(){window.removeEventListener("hashchange",ei(ci,this)),window.addEventListener("hashchange",ei(ci,this),{once:!0})}function pi(t){return pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pi(t)}function di(){di=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==pi(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(pi(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function yi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function vi(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yi(i,n,o,a,c,"next",t)}function c(t){yi(i,n,o,a,c,"throw",t)}a(void 0)}))}}function mi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gi(n.key),n)}}function gi(t){var e=function(t,e){if("object"!=pi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pi(e)?e:e+""}function bi(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function wi(t,e){return t.get(Ei(t,e))}function ki(t,e,r){return t.set(Ei(t,e),r),r}function Ei(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Li=new WeakMap,xi=new WeakMap,_i=new WeakMap,Si=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),bi(this,Li,null),bi(this,xi,null),bi(this,_i,null),this.title="Cerita Tersimpan - Dicoding Story App",ki(Li,this,new Io),ki(xi,this,new qo),ki(_i,this,new si(wi(Li,this),wi(xi,this)))},e=[{key:"render",value:(o=vi(di().mark((function t(){return di().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",wi(xi,this).getTemplate());case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=vi(di().mark((function t(){var e;return di().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=document.getElementById("offline-stories-list")){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,wi(_i,this).initialize(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}],e&&mi(t.prototype,e),r&&mi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();const Oi={"/":new Ge,"/login":new or,"/register":new Tr,"/stories/add":new an,"/offline":new Si,"/stories/:id":new ko};function ji(t){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ji(t)}function Pi(){Pi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ji(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ji(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Ti(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ni(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ti(i,n,o,a,c,"next",t)}function c(t){Ti(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ci(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mi(n.key),n)}}function Ii(t,e,r){return(e=Mi(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mi(t){var e=function(t,e){if("object"!=ji(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ji(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ji(e)?e:e+""}const Ai=function(){return t=function t(e){var r=e.content,n=e.drawerButton,o=e.navigationDrawer,i=e.authMenuContainer;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ii(this,"_content",null),Ii(this,"_drawerButton",null),Ii(this,"_navigationDrawer",null),!(r&&n&&o&&i))throw new Error("App requires content, drawerButton, navigationDrawer, and authMenuContainer elements.");this._content=r,this._drawerButton=n,this._navigationDrawer=o},e=[{key:"renderPage",value:(n=Ni(Pi().mark((function t(){var e,r,n,o,i,a,c,u,s=this;return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=cn(),l=void 0,l=cn(),r=l.match(/^\/stories\/([a-zA-Z0-9_-]+)$/)&&"/stories/add"!==l?"/stories/:id":(["/","/login","/register","/stories/add","/about","/stories/:id","/offline"].includes(l),l),n=Oi[r],o=["/","/stories/add"],i=["/login","/register"],(a=g())||!o.includes(e)){t.next=13;break}return location.hash="#/login",(0,ut.$f)(this._content,!0,"Redirecting to login..."),document.title="Redirecting...",t.abrupt("return");case 13:if(!a||!i.includes(e)){t.next=19;break}return location.hash="#/",(0,ut.$f)(this._content,!0,"Redirecting to home..."),document.title="Redirecting...",t.abrupt("return");case 19:if(n){t.next=26;break}return this._content.innerHTML='\n          <section class="container" style="text-align: center; padding-top: 50px;">\n            <h1 id="page-heading" tabindex="-1">404 - Halaman Tidak Ditemukan</h1>\n            <p>Maaf, halaman di alamat <code style="background: #eee; padding: 2px 4px; border-radius: 3px;">'.concat(e,'</code> tidak terdaftar.</p>\n            <a href="#/" class="button" style="margin-top: 20px;">Kembali ke Beranda</a>\n          </section>'),document.title="404 - Not Found",(c=document.getElementById("page-heading"))&&c.focus(),t.abrupt("return");case 26:if(t.prev=26,!document.startViewTransition){t.next=31;break}document.startViewTransition(Ni(Pi().mark((function t(){return Pi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,ut.$f)(s._content,!0,"Memuat halaman..."),t.next=3,n.render();case 3:return s._content.innerHTML=t.sent,(0,ut.$f)(s._content,!1),t.next=7,n.afterRender();case 7:"function"==typeof n.attachCleanupListener&&n.attachCleanupListener(),s._content.focus({preventScroll:!0});case 10:case"end":return t.stop()}}),t)})))),t.next=41;break;case 31:return(0,ut.$f)(this._content,!0,"Memuat halaman..."),t.next=34,n.render();case 34:return this._content.innerHTML=t.sent,(0,ut.$f)(this._content,!1),t.next=38,n.afterRender();case 38:"function"==typeof n.attachCleanupListener&&n.attachCleanupListener(),this._content.focus({preventScroll:!0});case 41:t.next=51;break;case 43:t.prev=43,t.t0=t.catch(26),(0,ut.$f)(this._content,!1),this._content.innerHTML='\n            <section class="container" style="text-align: center; padding-top: 50px;">\n              <h1 id="page-heading" tabindex="-1">Oops! Terjadi Kesalahan</h1>\n              <p>Maaf, terjadi masalah saat mencoba menampilkan halaman ini. Silakan coba lagi nanti.</p>\n              <p class="error-message" style="margin-top: 10px; font-size: 0.85rem; background: #eee; padding: 5px; border-radius: 3px; display: inline-block;">Detail Error: '.concat(t.t0.message,'</p>\n              <br><a href="#/" class="button" style="margin-top: 20px;">Kembali ke Beranda</a>\n            </section>'),document.title="Error - Dicoding Story App",(u=document.getElementById("page-heading"))&&u.focus();case 51:case"end":return t.stop()}var l}),t,this,[[26,43]])}))),function(){return n.apply(this,arguments)})}],e&&Ci(t.prototype,e),r&&Ci(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function Gi(){Gi=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Fi(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Fi(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function Bi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Fi(t){return Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fi(t)}function Di(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wi(n.key),n)}}function Wi(t){var e=function(t,e){if("object"!=Fi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fi(e)?e:e+""}function Ui(t,e,r){return e=qi(e),function(t,e){if(e&&("object"==Fi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Yi()?Reflect.construct(e,r||[],qi(t).constructor):e.apply(t,r))}function Ri(t){var e="function"==typeof Map?new Map:void 0;return Ri=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(Yi())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&Hi(o,r.prototype),o}(t,arguments,qi(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Hi(r,t)},Ri(t)}function Yi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Yi=function(){return!!t})()}function Hi(t,e){return Hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hi(t,e)}function qi(t){return qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qi(t)}function zi(t,e,r){Ki(t,e),e.set(t,r)}function Ki(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vi(t,e,r){return t.set(Ji(t,e),r),r}function $i(t,e){return t.get(Ji(t,e))}function Ji(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Qi=new WeakMap,Zi=new WeakMap,Xi=new WeakSet,ta=new WeakMap,ea=new WeakMap,ra=new WeakMap,na=new WeakMap,oa=function(t){function e(){var t,r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=Ui(this,e),Ki(r=t,n=Xi),n.add(r),zi(t,Qi,null),zi(t,Zi,null),zi(t,ta,(function(e){e.stopPropagation(),$i(na,t).call(t)})),zi(t,ea,(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),$i(na,t).call(t))})),zi(t,ra,(function(e){e.target.closest(".story-item__image-container")||$i(na,t).call(t)})),zi(t,na,(function(){var e=t.dataset.id;e&&!e.startsWith("unknown-")?location.hash="#/stories/".concat(e):alert("Tidak dapat membuka detail cerita ini (ID tidak valid).")})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hi(t,e)}(e,t),r=e,n=[{key:"connectedCallback",value:function(){var t;$i(Qi,this)&&!this.hasChildNodes()&&this.render(),this.setAttribute("role","article"),null!==(t=$i(Qi,this))&&void 0!==t&&t.id&&this.setAttribute("aria-labelledby","story-title-".concat($i(Qi,this).id)),this.setAttribute("tabindex","0"),this.removeEventListener("keydown",$i(ea,this)),this.addEventListener("keydown",$i(ea,this)),this.removeEventListener("click",$i(ra,this)),this.addEventListener("click",$i(ra,this)),Ji(Xi,this,ia).call(this)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("keydown",$i(ea,this)),this.removeEventListener("click",$i(ra,this)),Ji(Xi,this,aa).call(this),this._objectUrl&&(URL.revokeObjectURL(this._objectUrl),this._objectUrl=null)}},{key:"story",get:function(){return $i(Qi,this)},set:function(t){if(!t||"object"!==Fi(t))return Vi(Qi,this,null),void(this.isConnected&&(this.innerHTML='<p class="error-message" style="padding:10px;">Data invalid.</p>',this.removeAttribute("aria-labelledby")));Vi(Qi,this,t),this.isConnected&&(this.render(),Ji(Xi,this,ia).call(this),$i(Qi,this).id?this.setAttribute("aria-labelledby","story-title-".concat($i(Qi,this).id)):this.removeAttribute("aria-labelledby"))}},{key:"render",value:(i=Gi().mark((function t(){var e,r,n,o,i,a,c,u,s,l,f,h,p,d,y,v,m,g;return Gi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($i(Qi,this)){t.next=3;break}return this.innerHTML='<p style="padding:10px;">Memuat...</p>',t.abrupt("return");case 3:if(e=$i(Qi,this),r=e.id,n=void 0===r?"unknown-".concat(Math.random().toString(36).substring(2,8)):r,o=e.name,i=void 0===o?"Anonim":o,a=e.description,c=void 0===a?"N/A":a,u=e.photoUrl,s=e.photoBlob,l=e.createdAt,f=e.lat,h=e.lon,s?(this._objectUrl&&URL.revokeObjectURL(this._objectUrl),this._objectUrl=URL.createObjectURL(s),p=this._objectUrl):p=u||"images/placeholder.png",d="images/placeholder.png",y="N/A",!l){t.next=17;break}if(t.prev=8,!(y=ro(l)).includes("Invalid")&&!y.includes("Error")){t.next=12;break}throw new Error;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),y="Tgl Error";case 17:v="number"==typeof f&&"number"==typeof h&&!isNaN(f)&&!isNaN(h),m=v?"Dengan Lokasi":"",g=v?"fas fa-map-marker-alt":"",this.setAttribute("data-id",n),this.innerHTML='\n            <div class="story-card">\n                <div class="story-item__image-container" role="button" aria-label="Perbesar gambar cerita oleh '.concat(i,'">\n                    <img src="').concat(p,'" \n                        alt="Cerita oleh ').concat(i,'" \n                        class="story-item__image" \n                        onerror="this.onerror=null; this.src=\'').concat(d,"'; this.alt='Gagal memuat gambar cerita oleh ").concat(i,'\';" \n                        loading="lazy">\n                </div>\n                <div class="story-item__content">\n                    <div class="story-item__meta">\n                        <span class="story-item__author" id="story-title-').concat(n,'">').concat(i||"Tanpa Nama","</span>\n                        ").concat(v?'<span class="story-item__location"><i class="'.concat(g,'" aria-hidden="true"></i> ').concat(m,"</span>"):"",'\n                    </div>\n                    <p class="story-item__description">').concat(c,'</p>\n                    <time class="story-item__timestamp" datetime="').concat(l||"",'">').concat(y,"</time>\n                </div>\n            </div>\n        "),Vi(Zi,this,this.querySelector(".story-item__image-container"));case 23:case"end":return t.stop()}}),t,this,[[8,14]])})),a=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=i.apply(t,e);function a(t){Bi(o,r,n,a,c,"next",t)}function c(t){Bi(o,r,n,a,c,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})}],n&&Di(r.prototype,n),o&&Di(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,i,a}(Ri(HTMLElement));function ia(){Ji(Xi,this,aa).call(this),$i(Zi,this)&&$i(Zi,this).addEventListener("click",$i(ta,this))}function aa(){$i(Zi,this)&&$i(Zi,this).removeEventListener("click",$i(ta,this))}function ca(t){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ca(t)}function ua(){ua=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function g(){}function b(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(N([])));E&&E!==r&&n.call(E,a)&&(w=E);var L=b.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ca(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,r,n){var o=h;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ca(e)+" is not iterable")}return g.prototype=b,o(L,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(L),s(L,u,"Generator"),s(L,a,(function(){return this})),s(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function sa(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function la(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){sa(i,n,o,a,c,"next",t)}function c(t){sa(i,n,o,a,c,"throw",t)}a(void 0)}))}}customElements.get("story-item")||customElements.define("story-item",oa);var fa=null;function ha(t,e,r){t.setAttribute("aria-hidden","true"),e.setAttribute("aria-hidden","true"),r.setAttribute("aria-expanded","false"),t.classList.remove("open"),e.classList.remove("open")}function pa(t,e){if(t&&e){t.innerHTML="",e.innerHTML="";var r="",n="";if(g()){var o=v(),i=o?o.name:"User";r='\n            <li><span class="user-greeting">Hi, <strong>'.concat(i,'</strong>!</span></li>\n            <li><button id="logout-button-desktop" class="nav-button button--logout"><i class="fas fa-sign-out-alt"></i> Logout</button></li>\n        '),n='\n            <li><span class="user-greeting--mobile">Hi, <strong>'.concat(i,'</strong>!</span></li>\n            <li><button id="logout-button-mobile" class="nav-button button--logout"><i class="fas fa-sign-out-alt"></i> Logout</button></li>\n        ')}else n='<li></li><li><a href="#/register">Register</a></li>';if(t.innerHTML=r,e.innerHTML=n,g()){var a,c,u=function(t){t.preventDefault(),confirm("Apakah Anda yakin ingin logout?")&&b()};null===(a=document.getElementById("logout-button-desktop"))||void 0===a||a.addEventListener("click",u),null===(c=document.getElementById("logout-button-mobile"))||void 0===c||c.addEventListener("click",u)}}}function da(){var t=document.querySelectorAll(".nav-item--auth-required"),e=g();t.forEach((function(t){t.style.display=e?"":"none"}))}function ya(){var t=document.querySelector(".skip-link"),e=document.querySelector("#main-content");t&&e&&(t.removeEventListener("click",va),t.addEventListener("click",va))}function va(t){t.preventDefault();var e=document.querySelector("#main-content");e&&e.focus()}document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector("#main-content"),e=document.querySelector("#drawer-button"),n=document.querySelector("#navigation-drawer"),a=document.querySelector("#auth-menu-container"),u=document.querySelector("#mobile-drawer"),s=document.querySelector("#mobile-auth-menu-container"),l=document.querySelector("#mobile-drawer-close"),f=document.querySelector("#drawer-overlay");if(t&&e&&n&&a&&u&&s&&l&&f){var h,p,d,y;(0,ut.xQ)(),function(){var t=document.querySelector(".clock__time"),e=document.querySelector(".clock__date");function r(){if(t&&e){var r=new Date,n=String(r.getHours()).padStart(2,"0"),o=String(r.getMinutes()).padStart(2,"0"),i=String(r.getSeconds()).padStart(2,"0");t.textContent="".concat(n,":").concat(o,":").concat(i);var a={weekday:"long",year:"numeric",month:"long",day:"numeric"};try{e.textContent=r.toLocaleDateString("id-ID",a)}catch(t){e.textContent=r.toLocaleDateString("en-US",a)}}}fa&&clearInterval(fa);r(),fa=setInterval(r,1e3)}(),p=u,d=l,y=f,(h=e).addEventListener("click",(function(t){t.stopPropagation(),function(t,e,r){t.setAttribute("aria-hidden","false"),e.setAttribute("aria-hidden","false"),r.setAttribute("aria-expanded","true"),t.classList.add("open"),e.classList.add("open")}(p,y,h)})),d.addEventListener("click",(function(){ha(p,y,h)})),y.addEventListener("click",(function(){ha(p,y,h)})),p.addEventListener("click",(function(t){t.target.matches("a")&&ha(p,y,h)}));var v=new Ai({content:t,drawerButton:e,navigationDrawer:n,authMenuContainer:a});c.on(o,(function(t){pa(a,s),da()})),c.on(i,(function(){pa(a,s),da()}));var m=function(){var t=la(ua().mark((function t(){var e;return ua().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return pa(a,s),da(),t.next=4,v.renderPage();case 4:return ya(),window.removeEventListener("hashchange",g),window.addEventListener("hashchange",g),t.next=10,r.e(177).then(r.bind(r,177));case 10:return e=t.sent.default,t.next=13,e();case 13:t.next=16;break;case 15:case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=la(ua().mark((function t(){return ua().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ha(u,f,e),t.next=4,v.renderPage();case 4:window.scrollTo(0,0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();m()}}))}},t=>{var e;e=494,t(t.s=e)}]);
//# sourceMappingURL=app.68e652ac878dbdf05092.bundle.js.map