self.addEventListener("push",(i=>{const t=i.data?i.data.json():{},n=t.title||"Storyku Notification",o={body:t.body||"Ada notifikasi baru untukmu!",icon:t.icon||"icons/icon-192x192.png",badge:t.badge||"icons/icon-72x72.png",data:t.data||{url:"/#/"},vibrate:[100,50,100]};i.waitUntil(self.registration.showNotification(n,o))})),self.addEventListener("notificationclick",(i=>{i.notification.close();const t=i.notification.data?.url||"/#/";i.waitUntil(clients.matchAll({type:"window"}).then((i=>{for(const n of i)if(n.url===t&&"focus"in n)return n.focus();if(clients.openWindow)return clients.openWindow(t)})))}));